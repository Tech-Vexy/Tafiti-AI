import{u as ke,a as Ce,Q as ce,A as W,b as Se,j as e,U as de,S as $e,d as _e,L as Pe,e as P,f as F,R as X,B as xe,G as he,r as m,h as me,C as Ae,i as Re,k as Te,l as pe,D as ue,m as ge,P as Le,F as be,n as E,o as te,T as J,p as De,q as G,M as fe,s as Ue,t as Ee,v as ze,w as je,x as Oe,y as se,z as Me,E as D,H as we,I as Ie,J as Z,K as B,N as Fe,O as Ge,V as ae,W as Be,X as z,Y as Ve,Z as qe,_ as Ye,$ as ie,a0 as re,a1 as He,a2 as Ke,a3 as K,a4 as ee,a5 as Qe,a6 as We,a7 as Ne,a8 as Xe,a9 as Je,aa as Ze,ab as et,ac as le,ad as tt}from"./vendor-react-NFnRu0ps.js";import{a as st,M as ve}from"./vendor-misc-CU5X6kO2.js";const at=({user:t})=>{const s=ke(),{user:i}=Ce();if(!t)return null;const a=[{label:"Citations",value:t.citation_count||0,icon:ce,color:"text-indigo-400"},{label:"Interest Score",value:t.interest_score||0,icon:W,color:"text-emerald-400"},{label:"Publications",value:t.publication_count||0,icon:Se,color:"text-amber-400"}];return e.jsxs("div",{className:"glass-card p-6 border-white/10 space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsxs("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-indigo-500/20 to-emerald-400/20 border border-white/10 flex items-center justify-center relative group overflow-hidden",children:[i?.imageUrl?e.jsx("img",{src:i.imageUrl,alt:"Profile",className:"w-full h-full object-cover group-hover:scale-110 transition-transform"}):e.jsx(de,{className:"w-12 h-12 text-white/50 group-hover:scale-110 transition-transform"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-emerald-400/10 opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold tracking-tight",children:t.username}),e.jsxs("p",{className:"text-sm text-[var(--text-dim)] flex items-center justify-center gap-1 mt-1",children:[e.jsx($e,{className:"w-3 h-3"})," ",t.university||"Independent Researcher"]})]}),e.jsxs("p",{className:"text-sm text-[var(--text-muted)] line-clamp-3 italic",children:['"',t.bio||"Developing the next generation of academic discovery tools.",'"']})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 pt-4 border-t border-white/5",children:a.map((r,x)=>e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx(r.icon,{className:`w-4 h-4 mx-auto ${r.color}`}),e.jsx("div",{className:"text-lg font-black",children:r.value}),e.jsx("div",{className:"text-[10px] uppercase font-bold tracking-tighter text-[var(--text-muted)]",children:r.label})]},x))}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-[var(--text-muted)]",children:"Research Interests"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.expertise_areas?.length>0?t.expertise_areas:["AI","Open Science"]).map((r,x)=>e.jsx("span",{className:"px-3 py-1 bg-white/5 border border-white/5 rounded-full text-[10px] font-bold text-white/70",children:r},x))})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5 space-y-3",children:[e.jsx("button",{onClick:()=>s.openUserProfile(),className:"w-full flex items-center justify-between px-4 py-3 rounded-2xl bg-white/5 border border-white/5 text-slate-400 hover:text-white hover:bg-white/10 transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-4 h-4 group-hover:rotate-45 transition-transform"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Manage Account"})]})}),e.jsx("button",{onClick:()=>s.signOut(),className:"w-full flex items-center justify-between px-4 py-3 rounded-2xl bg-red-500/5 border border-red-500/10 text-red-400/70 hover:text-red-400 hover:bg-red-500/10 transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Sign Out"})]})})]})]})},it=({topics:t,onSelect:s,isLoading:i})=>i?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-pulse",children:[1,2,3].map(a=>e.jsx("div",{className:"glass-card h-48 bg-white/5 border-white/5"},a))}):!t||t.length===0?null:e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4 border-b border-[var(--border-glass)] pb-6",children:[e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-2xl text-emerald-400",children:e.jsx(P,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black tracking-tight",children:"Personalized Suggestions"}),e.jsx("p",{className:"text-[var(--text-dim)]",children:"AI-curated topics based on your professional profile"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((a,r)=>e.jsxs("button",{onClick:()=>s(a.title),className:"group text-left glass-card p-6 border-white/5 hover:border-emerald-500/30 hover:bg-emerald-500/5 transition-all duration-500 flex flex-col justify-between h-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:e.jsx(F,{className:"w-4 h-4 text-emerald-400"})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold group-hover:text-emerald-400 transition-colors leading-tight",children:a.title}),e.jsx("p",{className:"text-sm text-[var(--text-muted)] line-clamp-3",children:a.description})]})]},r))})]}),rt=({onSave:t,isLoading:s,user:i})=>{const[a,r]=X.useState(i?.career_field||""),[x,l]=X.useState(i?.expertise_areas?.join(", ")||""),h=d=>{d.preventDefault(),!(!a||!x)&&t({career_field:a,interests:x.split(",").map(c=>c.trim()).filter(c=>c)})};return e.jsxs("form",{onSubmit:h,className:"glass-card p-8 border-white/10 max-w-2xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-2xl font-black",children:"Personalize Your Experience"}),e.jsx("p",{className:"text-[var(--text-dim)]",children:"Tell us about yourself to get tailored research topics."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-black uppercase tracking-widest text-[var(--text-muted)] flex items-center gap-2",children:[e.jsx(xe,{className:"w-3 h-3"})," Career Field / Role"]}),e.jsx("input",{type:"text",value:a,onChange:d=>r(d.target.value),placeholder:"e.g. Bio-Tech Researcher, Frontend Engineer...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 focus:ring-2 focus:ring-indigo-500/50 outline-none transition-all",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-black uppercase tracking-widest text-[var(--text-muted)] flex items-center gap-2",children:[e.jsx(he,{className:"w-3 h-3"})," Areas of Interest"]}),e.jsx("textarea",{value:x,onChange:d=>l(d.target.value),placeholder:"e.g. Distributed Systems, Neural Networks, Urban Planning...",rows:3,className:"w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 focus:ring-2 focus:ring-indigo-500/50 outline-none transition-all resize-none",required:!0}),e.jsx("p",{className:"text-[10px] text-[var(--text-muted)]",children:"Separate multiple interests with commas"})]})]}),e.jsx("button",{type:"submit",disabled:s||!a||!x,className:"w-full btn-primary py-4 text-lg flex items-center justify-center gap-3 disabled:opacity-50",children:s?e.jsx("div",{className:"w-6 h-6 border-4 border-white/20 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-5 h-5"}),"Generate My Recommendations"]})})]})},Y=new Map,lt=[{prefix:"/auth/me",ttl:3e4},{prefix:"/queries/library",ttl:6e4},{prefix:"/queries/",ttl:3e4},{prefix:"/notes/",ttl:6e4},{prefix:"/social/notifications",ttl:2e4},{prefix:"/research/recommendations",ttl:12e4},{prefix:"/billing/",ttl:12e4}],nt=[{mutationPrefix:"/queries/library",bustPrefix:"/queries/library"},{mutationPrefix:"/queries/",bustPrefix:"/queries/"},{mutationPrefix:"/notes/",bustPrefix:"/notes/"},{mutationPrefix:"/auth/me",bustPrefix:"/auth/me"},{mutationPrefix:"/social/",bustPrefix:"/social/notifications"}];function ye(t){let s=null;for(const i of lt)t.includes(i.prefix)&&(!s||i.prefix.length>s.prefix.length)&&(s=i);return s?s.ttl:0}function ot(t){for(const s of nt)if(t.includes(s.mutationPrefix))for(const i of Y.keys())i.includes(s.bustPrefix)&&Y.delete(i)}const _=st.create({baseURL:"http://localhost:8000/api/v1",headers:{"Content-Type":"application/json"},timeout:3e4}),ct=t=>{_.interceptors.request.use(async s=>{try{const i=await t();i&&(s.headers.Authorization=`Bearer ${i}`)}catch{}return s},s=>Promise.reject(s))};_.interceptors.request.use(t=>{if(t.method?.toLowerCase()!=="get")return t;const s=t.url||"";if(ye(s)<=0)return t;const a=`GET:${s}`,r=Y.get(a);return r&&Date.now()<r.expiresAt&&(t.adapter=()=>Promise.resolve({data:r.data,status:200,statusText:"OK (cached)",headers:{},config:t})),t},t=>Promise.reject(t));_.interceptors.response.use(t=>{const s=t.config.method?.toLowerCase(),i=t.config.url||"";if(s==="get"){const a=ye(i);a>0&&Y.set(`GET:${i}`,{data:t.data,expiresAt:Date.now()+a})}else["post","put","patch","delete"].includes(s)&&ot(i);return t},t=>(t.response?.status===401&&localStorage.removeItem("auth_token"),Promise.reject(t)));const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:_,injectToken:ct},Symbol.toStringTag,{value:"Module"}));function H(t=""){const s=t.trim().split(/\s+/);if(s.length===1)return{first:"",last:s[0]};const i=s[s.length-1];return{first:s.slice(0,-1).join(" "),last:i}}function U(t){const{first:s,last:i}=H(t);return s?`${i}, ${s}`:i}function Q(t){const{first:s,last:i}=H(t),a=s.split(/\s+/).map(r=>r.charAt(0).toUpperCase()+".").join(" ");return s?`${i}, ${a}`:i}function dt(t){const s=t.authors[0]?H(t.authors[0]).last.toLowerCase().replace(/[^a-z]/g,""):"unknown",i=t.year||"nd",a=(t.title||"").toLowerCase().split(/\s+/).find(r=>r.length>3&&!/^(the|and|for|with|from|this|that)$/.test(r))||"paper";return`${s}${i}${a.replace(/[^a-z]/g,"")}`}const O=t=>t.startsWith("http")?t:`https://openalex.org/${t}`;function xt(t){return t.map(s=>{const i=s.authors.length>0?s.authors.map(a=>U(a)).join(" and "):"Unknown Author";return[`@article{${dt(s)},`,`  author    = {${i}},`,`  title     = {{${s.title||"Untitled"}}},`,`  year      = {${s.year||"n.d."}},`,`  url       = {${O(s.id)}}`,"}"].join(`
`)}).join(`

`)}function ht(t){return t.map((s,i)=>{const a=s.authors.length===0?"Unknown Author":s.authors.length===1?Q(s.authors[0]):s.authors.slice(0,-1).map(Q).join(", ")+", & "+Q(s.authors[s.authors.length-1]),r=s.year?`(${s.year})`:"(n.d.)";return`[${i+1}] ${a} ${r}. ${s.title||"Untitled"}. OpenAlex. ${O(s.id)}`}).join(`

`)}function mt(t){return t.map((s,i)=>{let a;s.authors.length===0?a="Unknown Author":s.authors.length===1?a=U(s.authors[0]):a=U(s.authors[0])+", et al.";const r=s.year||"n.d.";return`[${i+1}] ${a}. "${s.title||"Untitled"}." OpenAlex, ${r}. ${O(s.id)}`}).join(`

`)}function pt(t){return t.map((s,i)=>{let a;s.authors.length===0?a="Unknown Author":s.authors.length===1?a=U(s.authors[0]):s.authors.length===2?a=U(s.authors[0])+", and "+s.authors[1]:a=U(s.authors[0])+", et al.";const r=s.year||"n.d.";return`[${i+1}] ${a}. "${s.title||"Untitled"}." OpenAlex, ${r}. ${O(s.id)}.`}).join(`

`)}function ut(t){return t.map((s,i)=>{const a=s.authors.length===0?"Unknown Author":s.authors.slice(0,6).map(x=>{const{first:l,last:h}=H(x),d=l.split(/\s+/).map(c=>c.charAt(0).toUpperCase()).join("");return`${h} ${d}`}).join(", ")+(s.authors.length>6?", et al.":""),r=s.year||"n.d.";return`${i+1}. ${a}. ${s.title||"Untitled"}. OpenAlex. ${r}. Available: ${O(s.id)}`}).join(`

`)}function gt(t){return t.map(s=>{const i=["TY  - JOUR"];return i.push(`TI  - ${s.title||"Untitled"}`),s.authors.length>0&&s.authors.forEach(a=>i.push(`AU  - ${U(a)}`)),s.year&&i.push(`PY  - ${s.year}`),i.push(`UR  - ${O(s.id)}`),i.push("ER  -"),i.join(`
`)}).join(`

`)}const ne=[{id:"bibtex",label:"BibTeX",ext:"bib",fn:xt},{id:"apa",label:"APA 7",ext:"txt",fn:ht},{id:"mla",label:"MLA 9",ext:"txt",fn:mt},{id:"chicago",label:"Chicago",ext:"txt",fn:pt},{id:"vancouver",label:"Vancouver",ext:"txt",fn:ut},{id:"ris",label:"RIS",ext:"ris",fn:gt}],bt=({papers:t=[],defaultOpen:s=!1})=>{const[i,a]=m.useState(s),[r,x]=m.useState("bibtex"),[l,h]=m.useState(!1);if(t.length===0)return null;const d=ne.find(p=>p.id===r),c=d?d.fn(t):"",g=async()=>{try{await navigator.clipboard.writeText(c),h(!0),setTimeout(()=>h(!1),2e3)}catch{const p=document.createElement("textarea");p.value=c,document.body.appendChild(p),p.select(),document.execCommand("copy"),document.body.removeChild(p),h(!0),setTimeout(()=>h(!1),2e3)}},j=()=>{const p=new Blob([c],{type:"text/plain;charset=utf-8"}),N=URL.createObjectURL(p),y=document.createElement("a");y.href=N,y.download=`citations_${r}_${new Date().toISOString().split("T")[0]}.${d.ext}`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(N)};return e.jsxs("div",{className:"mt-8 border border-white/10 rounded-3xl overflow-hidden bg-white/[0.01]",children:[e.jsxs("button",{onClick:()=>a(!i),className:"w-full flex items-center justify-between px-6 py-5 hover:bg-white/[0.03] transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 bg-indigo-500/10 rounded-xl flex items-center justify-center border border-indigo-500/20",children:e.jsx(me,{className:"w-4 h-4 text-indigo-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Export Citations"}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-medium mt-0.5",children:[t.length," paper",t.length!==1?"s":""," · BibTeX, APA, MLA, Chicago, Vancouver, RIS"]})]})]}),i?e.jsx(Ae,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-400 transition-colors"}):e.jsx(Re,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-400 transition-colors"})]}),i&&e.jsxs("div",{className:"px-6 pb-6 space-y-4 animate-slide-up",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map(p=>e.jsx("button",{onClick:()=>x(p.id),className:`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest border transition-all duration-300 ${r===p.id?"bg-indigo-500/15 text-indigo-300 border-indigo-500/30 shadow-lg shadow-indigo-500/10":"bg-white/[0.02] text-slate-500 border-white/5 hover:text-white hover:border-white/15"}`,children:p.label},p.id))}),e.jsx("div",{className:"relative",children:e.jsx("pre",{className:"w-full max-h-64 overflow-y-auto custom-scrollbar bg-black/30 border border-white/10 rounded-2xl p-5 text-xs text-slate-300 font-mono leading-relaxed whitespace-pre-wrap",children:c})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:g,className:`flex items-center gap-2 px-5 py-3 rounded-xl border text-xs font-black uppercase tracking-widest transition-all duration-300 ${l?"bg-emerald-500/15 text-emerald-400 border-emerald-500/30":"bg-white/5 text-slate-400 border-white/10 hover:text-white hover:border-white/20"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"w-3.5 h-3.5"})," Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-3.5 h-3.5"})," Copy ",d?.label]})}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-5 py-3 rounded-xl border bg-indigo-500/10 text-indigo-400 border-indigo-500/20 hover:bg-indigo-500/20 text-xs font-black uppercase tracking-widest transition-all",children:[e.jsx(ue,{className:"w-3.5 h-3.5"}),"Download .",d?.ext]}),e.jsxs("span",{className:"ml-auto text-[10px] text-slate-600 font-medium",children:[t.length," reference",t.length!==1?"s":""]})]})]})]})},ft=({synthesis:t,papers:s,isLoading:i,onClip:a,language:r="English"})=>{if(!t&&!i)return null;const x=()=>{if(!t)return;const l=t.match(/^# Title:\s*(.*)/m),h=l?l[1].trim().replace(/[^a-z0-9]/gi,"_").toLowerCase():`research_synthesis_${new Date().toISOString().split("T")[0]}`,d=new Blob([t],{type:"text/markdown"}),c=URL.createObjectURL(d),g=document.createElement("a");g.href=c,g.download=`${h}.md`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(c)};return e.jsxs("div",{className:"w-full glass-card-heavy p-8 mt-12 animate-fade-in relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-emerald-400 to-indigo-500 shadow-[0_0_20px_var(--primary-glow)]"}),e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center",children:e.jsx(P,{className:"text-indigo-400 w-5 h-5 glow-pulse"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-2xl font-black tracking-tight bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent",children:"AI Research Synthesis"}),r&&r!=="English"&&e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-[10px] font-black uppercase tracking-widest",children:[e.jsx(ge,{className:"w-3 h-3"}),r]})]}),e.jsxs("p",{className:"text-xs text-[var(--text-muted)] font-bold uppercase tracking-widest mt-0.5",children:["Powered by ",s.length," selected sources"]})]}),t&&!i&&e.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[e.jsxs("button",{onClick:x,className:"no-print flex items-center gap-2 px-6 py-3 bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10 rounded-2xl font-bold transition-all active:scale-95 group",title:"Download Markdown",children:[e.jsx(ue,{className:"w-4 h-4 group-hover:translate-y-0.5 transition-transform"}),"Download"]}),e.jsxs("button",{onClick:()=>window.print(),className:"no-print flex items-center gap-2 px-6 py-3 bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10 rounded-2xl font-bold transition-all active:scale-95 group",title:"Print Synthesis",children:[e.jsx(Le,{className:"w-4 h-4 group-hover:rotate-6 transition-transform"}),"Print"]}),e.jsxs("button",{onClick:()=>a&&a(t,s),className:"no-print flex items-center gap-2 px-6 py-3 bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-400 border border-indigo-500/20 rounded-2xl font-bold transition-all active:scale-95 group",children:[e.jsx(be,{className:"w-4 h-4 group-hover:rotate-6 transition-transform"}),"Clip to Notes"]})]})]}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("div",{className:"text-[var(--text-dim)] leading-relaxed text-lg whitespace-pre-wrap",children:t?e.jsx(ve,{components:{p:({children:l})=>e.jsx("p",{className:"mb-4",children:l}),strong:({children:l})=>e.jsx("strong",{className:"text-indigo-300 font-bold",children:l})},children:t}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 space-y-4",children:[e.jsx(E,{className:"w-12 h-12 text-indigo-500 animate-spin"}),e.jsx("p",{className:"text-sm font-medium animate-pulse",children:"Generating synthesis based on selected papers..."})]})})}),t&&s.length>0&&e.jsxs("div",{className:"mt-12 pt-8 border-t border-[var(--border-glass)]",children:[e.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest text-[var(--text-muted)] mb-6 flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4"})," Cited Sources"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map((l,h)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-white/5 border border-white/5 hover:border-indigo-500/20 transition-all duration-300 group",children:[e.jsxs("div",{className:"w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center text-[10px] font-bold text-indigo-400 shrink-0",children:["[",h+1,"]"]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-[var(--text-main)] truncate group-hover:text-indigo-400 transition-colors",children:l.title}),e.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:[l.authors[0]," et al. • ",l.year]})]})]},h))})]}),t&&s.length>0&&e.jsx(bt,{papers:s}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-64 h-64 bg-indigo-500/5 blur-[100px] rounded-full -z-10"})]})},Et=Object.freeze(Object.defineProperty({__proto__:null,SynthesisView:ft},Symbol.toStringTag,{value:"Module"})),jt=({careerField:t,onSearch:s,topics:i,isLoadingRecs:a})=>{const[r,x]=m.useState([]),[l,h]=m.useState(!1);return m.useEffect(()=>{(async()=>{h(!0);try{const c=await _.get(`/research/discovery/trending?field=${t||""}`);x(Array.isArray(c.data)?c.data:[])}catch(c){console.error("Discovery failed",c),x([])}finally{h(!1)}})()},[t]),e.jsxs("div",{className:"space-y-10",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg text-orange-400",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsxs("h3",{className:"font-bold",children:["Trending in ",t||"Your Field"]})]})}),e.jsx("div",{className:"space-y-4",children:l?[1,2,3].map(d=>e.jsx("div",{className:"h-24 glass-card bg-white/5 animate-pulse"},d)):r.map((d,c)=>e.jsxs("div",{className:"glass-card p-4 border-white/5 hover:border-orange-500/30 transition-all group flex gap-4 items-start cursor-pointer",onClick:()=>s(d.title),children:[e.jsxs("div",{className:"min-w-[40px] h-10 bg-white/5 rounded-lg flex items-center justify-center font-black text-white/20",children:["0",c+1]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-bold line-clamp-2 group-hover:text-orange-400 transition-colors",children:d.title}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-[var(--text-muted)]",children:[e.jsxs("span",{children:[d.citations," citations"]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:d.year})]})]})]},c))})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:e.jsx(P,{className:"w-5 h-5"})}),e.jsx("h3",{className:"font-bold",children:"Discovery Topics"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map((d,c)=>e.jsxs("button",{onClick:()=>s(d.title),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-xs font-bold hover:bg-white/10 hover:border-indigo-500/30 transition-all flex items-center gap-2 group",children:[d.title,e.jsx(De,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]},c))})]})]})},wt=({researchers:t,isLoading:s,onConnect:i})=>s?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-[var(--text-muted)] flex items-center gap-2",children:[e.jsx(G,{className:"w-3 h-3"})," Potential Collaborators"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[1,2].map(a=>e.jsx("div",{className:"glass-card p-6 border-white/5 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-2xl"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-2/3"}),e.jsx("div",{className:"h-3 bg-white/5 rounded w-1/2"})]})]})},a))})]}):!t||t.length===0?null:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-[var(--text-muted)] flex items-center gap-2",children:[e.jsx(G,{className:"w-3 h-3"})," Recommended Collaborators"]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-500/10 rounded-full border border-indigo-500/10",children:[e.jsx(P,{className:"w-3 h-3 text-indigo-400"}),e.jsx("span",{className:"text-[10px] font-bold text-indigo-300 uppercase tracking-wider",children:"Similarity Match"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(a=>e.jsxs("div",{className:"glass-card p-6 border-white/5 hover:border-indigo-500/30 transition-all group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-indigo-500/5 blur-2xl rounded-full -z-10 group-hover:bg-indigo-500/10 transition-colors"}),e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-500/20 to-indigo-600/5 rounded-2xl flex items-center justify-center border border-indigo-500/20 shadow-lg group-hover:scale-105 transition-transform",children:e.jsx(he,{className:"w-7 h-7 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-black text-lg text-white group-hover:text-indigo-300 transition-colors",children:a.username}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-[var(--text-dim)] font-medium",children:[e.jsx(fe,{className:"w-3 h-3"}),a.university||"Independent Researcher"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-black text-indigo-400 leading-none",children:[Math.round(a.similarity_score),"%"]}),e.jsx("div",{className:"text-[10px] font-bold text-[var(--text-muted)] uppercase tracking-tighter",children:"Match"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.expertise_areas.slice(0,3).map((r,x)=>e.jsx("span",{className:"px-2.5 py-1 bg-white/5 border border-white/5 rounded-lg text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:r},x)),a.expertise_areas.length>3&&e.jsxs("span",{className:"text-[10px] font-bold text-[var(--text-muted)] self-center",children:["+",a.expertise_areas.length-3," more"]})]}),e.jsxs("p",{className:"text-xs text-[var(--text-dim)] line-clamp-2 leading-relaxed italic",children:['"',a.bio||"Passionate about advancing shared research frontiers.",'"']})]}),e.jsxs("button",{onClick:r=>{r.stopPropagation(),i&&i(a.id)},className:"w-full mt-6 py-3 bg-white/5 hover:bg-indigo-500/20 text-white rounded-xl text-xs font-black uppercase tracking-widest border border-white/5 hover:border-indigo-500/30 transition-all flex items-center justify-center gap-2 group/btn",children:[e.jsx(Ue,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"}),"Connect to Collaborate"]})]},a.id))})]}),Nt=({user:t,careerField:s,onSearch:i})=>{const[a,r]=m.useState(!1),[x,l]=m.useState({bio:t.bio||"",university:t.university||"",career_field:s||"",expertise_areas:t.expertise_areas||[]}),[h,d]=m.useState(!1),[c,g]=m.useState(null),j=async()=>{d(!0),g(null);try{await _.put("/auth/me",x),r(!1),window.location.reload()}catch(p){console.error("Failed to update profile:",p),g("Failed to save changes. Please try again.")}finally{d(!1)}};return e.jsxs("div",{className:"space-y-10 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center text-indigo-400",children:e.jsx(de,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight text-white",children:"Academic Profile"}),e.jsx("p",{className:"text-[var(--text-dim)] font-medium",children:"Manage your research presence and discover new frontiers."})]})]}),a?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-6 py-3 text-slate-400 font-bold hover:text-white transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:j,disabled:h,className:"flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-2xl font-black shadow-lg shadow-indigo-500/20 transition-all active:scale-95 disabled:opacity-50",children:[h?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(ze,{className:"w-4 h-4"}),"Save Changes"]})]}):e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-6 py-3 bg-white/5 hover:bg-white/10 text-white rounded-2xl border border-white/10 font-bold transition-all active:scale-95",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Edit Profile"]})]}),c&&e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl text-red-400 text-sm font-bold animate-shake",children:c}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a?e.jsxs("div",{className:"glass-card p-8 border-indigo-500/20 space-y-6 animate-slide-up",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Bio"}),e.jsx("textarea",{className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-sm text-white focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all outline-none min-h-[120px]",placeholder:"Tell the world about your research...",value:x.bio,onChange:p=>l({...x,bio:p.target.value})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"University / Institution"}),e.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-sm text-white focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all outline-none",type:"text",placeholder:"e.g. Stanford University",value:x.university,onChange:p=>l({...x,university:p.target.value})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Career Field"}),e.jsx("input",{className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-sm text-white focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all outline-none",type:"text",placeholder:"e.g. Quantum Computing",value:x.career_field,onChange:p=>l({...x,career_field:p.target.value})})]})]}):e.jsx(at,{user:t}),e.jsxs("div",{className:"glass-card p-6 border-white/5 space-y-4",children:[e.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-[var(--text-muted)] flex items-center gap-2",children:[e.jsx(xe,{className:"w-3 h-3"})," Career Overview"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-[var(--text-dim)]",children:"Current Field"}),e.jsx("span",{className:"text-xs font-bold text-white",children:s||"Not set"})]}),e.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 w-[65%]"})})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-8",children:e.jsxs("div",{className:"glass-card-heavy p-8 border-white/5 relative overflow-hidden h-full flex flex-col justify-center text-center",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/5 blur-[80px] rounded-full -z-10"}),e.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Impact Analytics"}),e.jsx("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:"Your influence across the academic network. These metrics are updated in real-time based on your saved research."}),e.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-4xl font-black text-indigo-400",children:t.citation_count||0}),e.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Citations"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-4xl font-black text-emerald-400",children:t.publications_count||0}),e.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Publications"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-4xl font-black text-orange-400",children:t.interest_score||0}),e.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Interests"})]})]})]})})]})]})},zt=Object.freeze(Object.defineProperty({__proto__:null,ProfileView:Nt},Symbol.toStringTag,{value:"Module"})),vt=({user:t})=>{const[s,i]=m.useState(!1),[a,r]=m.useState(!1),[x,l]=m.useState(null),h=t?.subscription_status==="active",d=!h&&t?.trial_ends_at?new Date(t.trial_ends_at)<new Date:!1,c=t?.trial_ends_at?Math.max(0,Math.ceil((new Date(t.trial_ends_at)-new Date)/(1e3*60*60*24))):14,j=(()=>{if(!t.created_at||!t.trial_ends_at)return 0;const N=new Date(t.created_at),y=new Date(t.trial_ends_at),v=new Date,u=y-N,k=v-N;return u<=0?100:Math.min(100,Math.max(0,Math.round(k/u*100)))})(),p=async()=>{i(!0),l(null);try{const{data:N}=await _.post("/billing/initialize");N?.authorization_url?window.location.href=N.authorization_url:l({type:"error",text:"Failed to initialize payment. Please try again."})}catch(N){console.error("Subscription error:",N),l({type:"error",text:"Could not connect to payment gateway."})}finally{i(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 animate-fade-in py-10",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-500/10 rounded-full border border-indigo-500/20 text-indigo-400 text-xs font-black uppercase tracking-widest",children:[e.jsx(je,{className:"w-4 h-4"}),"Premium Research Experience"]}),e.jsx("h2",{className:"text-5xl font-black tracking-tight text-white italic",children:"Advance Your Discovery"}),e.jsx("p",{className:"text-slate-400 max-w-xl mx-auto font-medium",children:"Unlock unlimited synthesis, advanced AI citations, and real-time collaboration tools."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"glass-card-heavy p-8 border-white/5 flex flex-col justify-between group hover:border-indigo-500/30 transition-all duration-500",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500",children:"Current Status"}),h?e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 text-emerald-400 rounded-full text-[10px] font-black uppercase tracking-widest",children:[e.jsx(Oe,{className:"w-3 h-3"})," Pro Active"]}):e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-500/10 text-indigo-400 rounded-full text-[10px] font-black uppercase tracking-widest",children:[e.jsx(se,{className:"w-3 h-3"})," ",d?"Trial Expired":"Free Trial"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-2xl font-black text-white capitalize",children:h?"Premium Scholar":"Early Access Trial"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium leading-relaxed",children:h?`Your subscription is active until ${new Date(t.subscription_ends_at).toLocaleDateString()}.`:d?"Your free trial has concluded. Subscribe to regain full access to synthesis tools.":`You have ${c} days remaining in your premium free trial period.`})]}),!h&&e.jsxs("div",{className:"p-4 bg-indigo-500/5 rounded-2xl border border-indigo-500/10 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-bold",children:[e.jsx("span",{className:"text-slate-400",children:"Trial Progress"}),e.jsxs("span",{className:"text-indigo-400",children:[d?100:j,"%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-1000",style:{width:`${d?100:j}%`}})})]})]}),!h&&e.jsxs("div",{className:"mt-10 pt-8 border-t border-white/5",children:[e.jsxs("button",{onClick:p,disabled:s,className:"w-full flex items-center justify-center gap-3 bg-indigo-500 hover:bg-indigo-600 disabled:opacity-50 text-white p-5 rounded-2xl font-black text-lg shadow-2xl shadow-indigo-500/20 active:scale-[0.98] transition-all",children:[s?e.jsx(E,{className:"w-6 h-6 animate-spin"}):e.jsx(Me,{className:"w-6 h-6"}),"Subscribe for 200 KES"]}),e.jsx("p",{className:"mt-4 text-center text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"SECURE PAYMENTS BY PAYSTACK"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-card p-6 border-white/5 space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-xl flex items-center justify-center text-emerald-400 shrink-0",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-1",children:"Unlimited Synthesis"}),e.jsx("p",{className:"text-xs text-slate-400 font-medium leading-[1.6]",children:"Generate as many academic syntheses as your research demands without limits."})]})]})}),e.jsx("div",{className:"glass-card p-6 border-white/5 space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center text-indigo-400 shrink-0",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-1",children:"Advanced Citations"}),e.jsx("p",{className:"text-xs text-slate-400 font-medium leading-[1.6]",children:"Automated [Ref N] notation mapped to a full bibliography for every session."})]})]})}),e.jsx("div",{className:"glass-card p-6 border-white/5 space-y-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/10 rounded-xl flex items-center justify-center text-orange-400 shrink-0",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-1",children:"Network Discovery"}),e.jsx("p",{className:"text-xs text-slate-400 font-medium leading-[1.6]",children:"Unlock the ability to discover and connect with scholars in your specific field."})]})]})}),x&&e.jsxs("div",{className:`p-4 rounded-2xl flex items-center gap-3 ${x.type==="error"?"bg-red-500/10 text-red-400 border border-red-500/20":"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"}`,children:[x.type==="error"?e.jsx(we,{className:"w-5 h-5"}):e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-bold",children:x.text})]})]})]}),e.jsx("div",{className:"text-center pt-8 opacity-40 hover:opacity-100 transition-opacity",children:e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.3em]",children:"Cancel anytime • No hidden fees • Premium support"})})]})},Ot=Object.freeze(Object.defineProperty({__proto__:null,BillingView:vt},Symbol.toStringTag,{value:"Module"})),yt=({user:t,recs:s,isFetchRecs:i,onSearch:a,careerField:r,similarResearchers:x,isLoadingSimilar:l,handleSavePaper:h,onFetchRecommendations:d,onConnect:c})=>{const[g,j]=m.useState("trending");return e.jsxs("div",{className:"space-y-12 animate-fade-in pb-20",children:[e.jsxs("header",{className:"relative overflow-hidden rounded-[3rem] bg-gradient-to-br from-indigo-600/20 via-indigo-900/10 to-transparent p-12 border border-white/5",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 blur-[100px] rounded-full -z-10"}),e.jsxs("div",{className:"max-w-3xl space-y-6 relative z-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-500/10 border border-indigo-500/20 rounded-full text-indigo-400 text-xs font-black uppercase tracking-widest",children:[e.jsx(Ie,{className:"w-4 h-4"})," Academic Explorer"]}),e.jsxs("h1",{className:"text-5xl font-black tracking-tight text-white leading-tight",children:["Discover the Next ",e.jsx("span",{className:"text-indigo-400",children:"Frontier"})," in ",r||"Science","."]}),e.jsx("p",{className:"text-xl text-[var(--text-dim)] leading-relaxed font-medium",children:"Real-time research trends, personalized topic suggestions, and potential collaborators curated for your academic journey."})]})]}),e.jsx("nav",{className:"flex items-center gap-6 border-b border-white/5 pb-2",children:[{id:"trending",label:"Trending Research",icon:J,color:"text-orange-400"},{id:"topics",label:"Recommended Topics",icon:P,color:"text-indigo-400"},{id:"collaborators",label:"Potential Collaborators",icon:G,color:"text-emerald-400"}].map(p=>e.jsxs("button",{onClick:()=>j(p.id),className:`group relative flex items-center gap-3 px-4 py-4 transition-all duration-300 font-bold text-sm ${g===p.id?"text-white":"text-slate-500 hover:text-slate-300"}`,children:[e.jsx(p.icon,{className:`w-4 h-4 ${g===p.id?p.color:"text-slate-600 group-hover:text-slate-400"}`}),p.label,g===p.id&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-indigo-500 rounded-full animate-tab-in"})]},p.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[g==="trending"&&e.jsxs("div",{className:"animate-reveal space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-black tracking-tight flex items-center gap-4",children:[e.jsx(J,{className:"text-orange-400"}),"Global Research Trends"]}),e.jsxs("button",{className:"text-xs font-bold text-slate-500 flex items-center gap-1 hover:text-white transition-colors",children:["Last 24 Hours ",e.jsx(Z,{className:"w-3 h-3"})]})]}),e.jsx(jt,{careerField:r,onSearch:a,topics:[],isLoadingRecs:!1})]}),g==="topics"&&e.jsx("div",{className:"animate-reveal space-y-10",children:s.length>0?e.jsx(it,{topics:s,onSelect:a,isLoading:i}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center py-20 glass-card-heavy border-dashed border-white/5 space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 rounded-3xl mx-auto flex items-center justify-center",children:e.jsx(P,{className:"w-10 h-10 text-indigo-400"})}),e.jsx("h3",{className:"text-xl font-bold",children:"No recommendations yet."}),e.jsx("p",{className:"text-slate-500 max-w-sm mx-auto",children:"Complete your profile preferences to see tailored research opportunities."})]}),e.jsx(rt,{onSave:d,isLoading:i,user:t})]})}),g==="collaborators"&&e.jsxs("div",{className:"animate-reveal space-y-8",children:[e.jsxs("h2",{className:"text-2xl font-black tracking-tight flex items-center gap-4",children:[e.jsx(G,{className:"text-emerald-400"}),"Collaborator Network"]}),e.jsx(wt,{researchers:x,isLoading:l,onConnect:c})]})]}),e.jsxs("aside",{className:"lg:col-span-4 space-y-8",children:[e.jsxs("div",{className:"glass-card p-8 border-white/5 space-y-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-2xl flex items-center justify-center text-indigo-400 shadow-xl group-hover:scale-110 transition-transform",children:e.jsx(B,{className:"w-6 h-6"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-black tracking-tight",children:"Rapid Search"}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed font-medium",children:"Quickly pivot to a new field or concept across our indexed research database."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search topic...",className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-6 text-sm focus:outline-none focus:border-indigo-500/30 transition-all font-medium",onKeyDown:p=>p.key==="Enter"&&a(p.target.value)})]})]})]}),e.jsxs("div",{className:"glass-card-heavy p-8 border-white/5 space-y-6",children:[e.jsxs("h4",{className:"text-xs font-black uppercase tracking-widest text-slate-600 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-3 h-3"})," Quick Navigation"]}),e.jsx("div",{className:"space-y-4",children:[{label:"Top Citations",icon:ge},{label:"Interdisciplinary",icon:P},{label:"Latest Pre-prints",icon:je}].map((p,N)=>e.jsxs("button",{className:"w-full flex items-center justify-between p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/5 transition-all text-sm font-bold group",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-400 group-hover:text-white transition-colors",children:[e.jsx(p.icon,{className:"w-4 h-4 opacity-50 group-hover:opacity-100"}),p.label]}),e.jsx(Z,{className:"w-4 h-4 text-slate-700 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]},N))})]})]})]})]})},Mt=Object.freeze(Object.defineProperty({__proto__:null,DiscoverView:yt},Symbol.toStringTag,{value:"Module"})),kt=({savedPapers:t,onSendMessage:s,onUploadFile:i,isUploading:a,uploadedFiles:r,onRemoveUpload:x,isLoading:l,messages:h,isCollaborative:d,setIsCollaborative:c,followupQuestions:g=[]})=>{const[j,p]=m.useState(""),[N,y]=m.useState(null),[v,u]=m.useState([]),[k,$]=m.useState(!1),f=m.useRef(null),w=m.useRef(null);m.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[h,l]);const C=n=>{n&&n.preventDefault(),!(!j.trim()||l)&&(s(j,v),p(""))},A=n=>{n.key==="Enter"&&n.ctrlKey&&C(n)},M=(n,b)=>{navigator.clipboard.writeText(n),y(b),setTimeout(()=>y(null),2e3)},T=n=>{const b=n.target.files[0];b&&i(b)},o=n=>{u(b=>b.includes(n)?b.filter(S=>S!==n):[...b,n])};return e.jsxs("div",{className:"flex flex-col h-[80vh] glass-card-heavy border-white/5 relative overflow-hidden animate-reveal",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 flex items-center justify-between z-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-white",children:"Research Assistant"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Conversational Grounding"}),r.length>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-emerald-500/10 text-emerald-400 text-[8px] font-black rounded-full uppercase tracking-tighter",children:[r.length," Uploads"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"file",ref:f,onChange:T,className:"hidden",accept:".pdf"}),e.jsxs("button",{onClick:()=>f.current?.click(),disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10 rounded-xl text-xs font-bold transition-all disabled:opacity-50",children:[a?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(ae,{className:"w-4 h-4"}),"Upload PDF"]}),e.jsxs("button",{onClick:()=>$(!k),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${v.length>0?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":"bg-white/5 text-slate-400 border border-white/10 hover:text-white"}`,children:[e.jsx(Be,{className:"w-4 h-4"}),v.length," Papers"]}),e.jsxs("button",{onClick:()=>c(!d),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${d?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-white/5 text-slate-400 border border-white/10 hover:text-white"}`,children:[e.jsx(P,{className:`w-4 h-4 ${d?"animate-pulse":""}`}),d?"Collaborative AI ON":"Single AI Mode"]}),v.length>0&&e.jsx("button",{onClick:()=>u([]),className:"p-2 hover:bg-white/5 rounded-lg text-slate-500 hover:text-red-400 transition-colors",children:e.jsx(z,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[e.jsxs("div",{ref:w,className:"flex-1 overflow-y-auto p-6 space-y-8 scrollbar-hide pb-32",children:[h.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center space-y-6 opacity-40",children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-3xl flex items-center justify-center",children:e.jsx(P,{className:"w-8 h-8 text-indigo-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xl font-bold",children:"Start Your Inquiry"}),e.jsx("p",{className:"text-sm max-w-xs mx-auto leading-relaxed",children:"Upload PDFs or select papers from your library to ground the AI's knowledge."})]})]}):h.map((n,b)=>e.jsx("div",{className:`flex ${n.role==="user"?"justify-end":"justify-start"} animate-fade-in`,children:e.jsxs("div",{className:`max-w-[85%] space-y-2 ${n.role==="user"?"items-end":"items-start"}`,children:[e.jsx("div",{className:`p-6 rounded-3xl ${n.role==="user"?"bg-indigo-600 text-white font-medium shadow-xl shadow-indigo-500/20":"glass-card border-white/10 text-slate-200"}`,children:e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(ve,{components:{strong:({children:S})=>e.jsx("span",{className:"text-indigo-400 font-bold",children:S}),p:({children:S})=>e.jsx("p",{className:"mb-2 last:mb-0 leading-relaxed",children:S})},children:n.content})})}),e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-600",children:n.role==="user"?"You":"Assistant"}),n.role==="assistant"&&e.jsxs("button",{onClick:()=>M(n.content,b),className:"p-1 hover:bg-white/5 rounded transition-all text-slate-600 hover:text-indigo-400 flex items-center gap-1",title:"Copy to clipboard",children:[N===b?e.jsx(D,{className:"w-3 h-3 text-emerald-400"}):e.jsx(pe,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter",children:N===b?"Copied":"Copy"})]})]})]})},b)),l&&e.jsx("div",{className:"flex justify-start animate-fade-in",children:e.jsxs("div",{className:"glass-card p-6 rounded-3xl border-white/10 flex items-center gap-4",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"})]}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Synthesizing..."})]})}),!l&&g&&g.length>0&&e.jsxs("div",{className:"flex flex-col gap-3 animate-slide-in-up",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-3 h-3 text-indigo-400"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Follow-up Suggestions"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((n,b)=>e.jsx("button",{onClick:()=>s(n,v),className:"px-4 py-2 bg-indigo-500/5 hover:bg-indigo-500/10 border border-indigo-500/10 hover:border-indigo-500/30 rounded-xl text-xs text-indigo-300 transition-all text-left max-w-sm",children:n},b))})]})]}),k&&e.jsx("div",{className:"w-80 border-l border-white/5 bg-white/2 backdrop-blur-xl absolute right-0 top-0 h-full z-30 transition-all animate-slide-in-right",children:e.jsxs("div",{className:"p-6 h-full flex flex-col",children:[e.jsxs("h4",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx(qe,{className:"w-3 h-3"})," Select Grounds"]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2 custom-scrollbar",children:t.map(n=>e.jsxs("button",{onClick:()=>o(n.paper_id),className:`w-full text-left p-4 rounded-2xl transition-all border ${v.includes(n.paper_id)?"bg-indigo-500/20 border-indigo-500/40 text-white":"bg-white/5 border-white/5 text-slate-400 hover:bg-white/10"}`,children:[e.jsx("p",{className:"text-xs font-bold line-clamp-2",children:n.title}),e.jsxs("p",{className:"text-[10px] opacity-60 mt-1",children:[n.authors[0]," • ",n.year]})]},n.id))})]})})]}),e.jsx("div",{className:"p-6 bg-gradient-to-t from-[var(--bg-main)] via-[var(--bg-main)] to-transparent pt-10",children:e.jsxs("form",{onSubmit:C,className:"max-w-4xl mx-auto relative group",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-emerald-400 rounded-2xl opacity-20 group-hover:opacity-40 transition-opacity blur"}),e.jsxs("div",{className:"relative flex items-center bg-[var(--bg-main)] rounded-2xl border border-white/10 focus-within:border-indigo-500/50 transition-all p-2",children:[e.jsx("input",{type:"text",value:j,onChange:n=>p(n.target.value),onKeyDown:A,placeholder:v.length>0||r.length>0?"Ask about your grounded sources...":"Ask a research question...",className:"flex-1 bg-transparent border-none outline-none px-4 py-3 text-white placeholder-slate-500 font-medium",disabled:l}),e.jsx("button",{type:"submit",disabled:!j.trim()||l,className:"p-3 bg-indigo-500 text-white rounded-xl hover:scale-105 active:scale-95 disabled:grayscale disabled:opacity-50 transition-all shadow-lg shadow-indigo-500/40",children:e.jsx(Ye,{className:"w-5 h-5"})})]}),(v.length>0||r.length>0)&&e.jsxs("div",{className:"absolute -top-12 left-0 flex gap-2 overflow-x-auto max-w-full pb-2 scrollbar-hide",children:[v.map(n=>{const b=t.find(S=>S.paper_id===n);return e.jsxs("div",{className:"px-3 py-1.5 bg-indigo-500/10 border border-indigo-500/20 rounded-full text-[10px] font-bold text-indigo-400 flex items-center gap-2 whitespace-nowrap",children:[e.jsx(ce,{className:"w-2.5 h-2.5 opacity-50"}),b?.authors[0]]},n)}),r.map((n,b)=>e.jsxs("div",{className:"px-3 py-1.5 bg-emerald-500/10 border border-emerald-500/20 rounded-full text-[10px] font-bold text-emerald-400 flex items-center gap-2 whitespace-nowrap group/tag relative",children:[e.jsx(ae,{className:"w-2.5 h-2.5 opacity-50"}),n.filename,e.jsx("button",{type:"button",onClick:()=>x(b),className:"hover:text-red-400 transition-colors",children:e.jsx(z,{className:"w-2.5 h-2.5"})})]},b))]})]})})]})},It=Object.freeze(Object.defineProperty({__proto__:null,ResearchChatView:kt},Symbol.toStringTag,{value:"Module"})),Ct=({user:t})=>{const[s,i]=m.useState([]),[a,r]=m.useState([]),[x,l]=m.useState(!0),[h,d]=m.useState(!1),[c,g]=m.useState({title:"",description:""}),[j,p]=m.useState(null);m.useEffect(()=>{N()},[]);const N=async()=>{l(!0);try{const u=await _.get("/collaboration/projects");i(u.data),u.data.length>0&&!j&&y(u.data[0])}catch(u){console.error("Failed to fetch projects",u)}finally{l(!1)}},y=async u=>{p(u);try{const k=await _.get(`/collaboration/projects/${u.id}/activity`);r(k.data)}catch(k){console.error("Failed to fetch activity",k)}},v=async u=>{u.preventDefault();try{const k=await _.post("/collaboration/projects",c);i($=>[...$,k.data]),d(!1),g({title:"",description:""}),y(k.data)}catch(k){console.error("Failed to create project",k)}};return x&&s.length===0?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(E,{className:"w-10 h-10 text-indigo-400 animate-spin"})}):e.jsxs("div",{className:"space-y-12 animate-reveal pb-20",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-black tracking-tight text-white mb-2",children:"Collaboration Hub"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Coordinate research efforts with your scholarly network."})]}),e.jsxs("button",{onClick:()=>d(!0),className:"btn-primary py-3 px-6 text-sm flex items-center gap-3",children:[e.jsx(ie,{className:"w-4 h-4"})," New Project"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[e.jsxs("aside",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-slate-500 flex items-center gap-2 px-2",children:[e.jsx(re,{className:"w-3 h-3"})," Active Projects"]}),e.jsx("div",{className:"space-y-3",children:s.length>0?s.map(u=>e.jsxs("button",{onClick:()=>y(u),className:`w-full p-6 rounded-[2rem] border transition-all duration-500 text-left group ${j?.id===u.id?"bg-indigo-500/10 border-indigo-500/30 ring-1 ring-indigo-500/20":"bg-white/5 border-white/5 hover:border-white/10"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${j?.id===u.id?"bg-indigo-500 text-white":"bg-white/5 text-slate-500 group-hover:text-white"}`,children:e.jsx(re,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:new Date(u.created_at).toLocaleDateString()})]}),e.jsx("h4",{className:`font-black tracking-tight mb-2 ${j?.id===u.id?"text-white":"text-slate-300"}`,children:u.title}),e.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 font-medium leading-relaxed",children:u.description||"No description provided."})]},u.id)):e.jsx("div",{className:"p-8 text-center border-2 border-dashed border-white/5 rounded-3xl",children:e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No projects yet."})})})]}),e.jsx("main",{className:"lg:col-span-8 space-y-12",children:j?e.jsxs("div",{className:"space-y-12 animate-tab-in",children:[e.jsxs("div",{className:"glass-card-heavy p-10 border-indigo-500/10 space-y-8",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-indigo-500/10 border border-indigo-500/20 rounded-full text-indigo-400 text-[10px] font-black uppercase tracking-widest",children:[e.jsx(He,{className:"w-3 h-3"})," Project Workspace"]}),e.jsx("h1",{className:"text-3xl font-black tracking-tight text-white",children:j.title}),e.jsx("p",{className:"text-slate-500 font-medium leading-relaxed max-w-2xl",children:j.description})]}),e.jsxs("div",{className:"flex -space-x-3",children:[[1,2,3].map(u=>e.jsxs("div",{className:"w-12 h-12 rounded-2xl border-4 border-[var(--bg-card)] bg-indigo-500/20 flex items-center justify-center text-xs font-black text-indigo-400",children:["U",u]},u)),e.jsx("button",{className:"w-12 h-12 rounded-2xl border-4 border-[var(--bg-card)] bg-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-8 border-t border-white/5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"Shared Library"}),e.jsx("p",{className:"text-xl font-black text-white",children:"0 Papers"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"Shared Notes"}),e.jsx("p",{className:"text-xl font-black text-white",children:"0 Notes"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"Team Members"}),e.jsx("p",{className:"text-xl font-black text-white",children:"1 Active"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("h3",{className:"text-xl font-black tracking-tight flex items-center gap-4",children:[e.jsx(W,{className:"text-emerald-400"}),"Recent Activity"]}),e.jsx("div",{className:"space-y-4",children:a.length>0?a.map(u=>e.jsxs("div",{className:"glass-card p-6 border-white/5 flex items-start gap-4 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center text-slate-500 group-hover:text-emerald-400 transition-colors",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-slate-300 mb-1",children:u.content}),e.jsx("span",{className:"text-[10px] text-slate-600 font-black uppercase tracking-widest",children:new Date(u.created_at).toLocaleString()})]})]},u.id)):e.jsx("div",{className:"py-12 text-center text-slate-500 font-medium italic",children:"No recent activity in this workspace."})})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center py-40 border-2 border-dashed border-white/5 rounded-[3rem]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-3xl mx-auto flex items-center justify-center text-slate-600",children:e.jsx(F,{className:"w-10 h-10"})}),e.jsx("h3",{className:"text-xl font-black text-white/40",children:"Select a project to begin."})]})})})]}),h&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 backdrop-blur-xl bg-black/60",children:e.jsxs("div",{className:"glass-card-heavy w-full max-w-lg p-10 border-white/10 shadow-2xl animate-modal-in",children:[e.jsxs("h3",{className:"text-2xl font-black text-white mb-8 flex items-center gap-4",children:[e.jsx(Ke,{className:"text-indigo-400"}),"Launch New Project"]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest pl-2",children:"Project Title"}),e.jsx("input",{type:"text",required:!0,placeholder:"e.g., Quantum Computing Synergy",className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white focus:outline-none focus:border-indigo-500/30 transition-all font-bold",value:c.title,onChange:u=>g({...c,title:u.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest pl-2",children:"Description"}),e.jsx("textarea",{rows:"4",placeholder:"Define the scope and goals of this collaboration...",className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white focus:outline-none focus:border-indigo-500/30 transition-all font-medium text-sm",value:c.description,onChange:u=>g({...c,description:u.target.value})})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 py-4 rounded-2xl bg-white/5 text-slate-500 font-bold hover:bg-white/10 transition-all",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 btn-primary py-4 rounded-2xl font-black uppercase tracking-widest text-xs",children:"Initialize Project"})]})]})]})})]})},Ft=Object.freeze(Object.defineProperty({__proto__:null,CollaborationView:Ct},Symbol.toStringTag,{value:"Module"})),V={Geographic:{bg:"bg-blue-500/10",text:"text-blue-300",border:"border-blue-500/20",dot:"bg-blue-400",icon:fe},Methodological:{bg:"bg-purple-500/10",text:"text-purple-300",border:"border-purple-500/20",dot:"bg-purple-400",icon:Xe},Temporal:{bg:"bg-amber-500/10",text:"text-amber-300",border:"border-amber-500/20",dot:"bg-amber-400",icon:se},Demographic:{bg:"bg-pink-500/10",text:"text-pink-300",border:"border-pink-500/20",dot:"bg-pink-400",icon:G},Theoretical:{bg:"bg-emerald-500/10",text:"text-emerald-300",border:"border-emerald-500/20",dot:"bg-emerald-400",icon:te},Interdisciplinary:{bg:"bg-orange-500/10",text:"text-orange-300",border:"border-orange-500/20",dot:"bg-orange-400",icon:Ne}},oe={High:{bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20",icon:ee},Medium:{bg:"bg-amber-500/10",text:"text-amber-400",border:"border-amber-500/20",icon:Ze},Low:{bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20",icon:D}},St=({category:t})=>{const s=V[t]||V.Theoretical,i=s.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${s.bg} ${s.text} ${s.border}`,children:[e.jsx(i,{className:"w-3 h-3"}),t]})},$t=({urgency:t})=>{const s=oe[t]||oe.Medium,i=s.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border ${s.bg} ${s.text} ${s.border}`,children:[e.jsx(i,{className:"w-2.5 h-2.5"}),t," Priority"]})},_t=({gap:t,index:s,onClipToNotes:i})=>{const[a,r]=m.useState(!1),x=V[t.category]||V.Theoretical;return e.jsxs("div",{className:`glass-card p-6 space-y-4 transition-all duration-500 animate-reveal border-l-2 ${x.border}`,style:{animationDelay:`${s*80}ms`},children:[e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-xl flex items-center justify-center shrink-0 ${x.bg} border ${x.border}`,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${x.dot}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-black text-white leading-tight tracking-tight",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[e.jsx(St,{category:t.category}),e.jsx($t,{urgency:t.urgency})]})]})]})}),e.jsx("p",{className:"text-sm text-slate-400 leading-relaxed font-medium pl-11",children:t.description}),e.jsxs("div",{className:"pl-11 space-y-2",children:[e.jsxs("button",{onClick:()=>r(!a),className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-indigo-300 transition-colors",children:[e.jsx(Je,{className:"w-3 h-3"}),t.suggested_questions?.length||0," Suggested Research Questions",e.jsx(Z,{className:`w-3 h-3 transition-transform ${a?"rotate-90":""}`})]}),a&&e.jsx("div",{className:"space-y-2 animate-slide-up",children:t.suggested_questions?.map((l,h)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-indigo-500/5 border border-indigo-500/10",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500/20 flex items-center justify-center shrink-0 mt-0.5",children:e.jsx("span",{className:"text-[9px] font-black text-indigo-400",children:h+1})}),e.jsxs("p",{className:"text-xs text-slate-300 font-medium leading-relaxed italic",children:['"',l,'"']})]},h))})]}),e.jsx("div",{className:"pl-11 pt-2 border-t border-white/5 flex justify-end",children:e.jsxs("button",{onClick:()=>i(t),className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500 hover:text-indigo-400 transition-colors",children:[e.jsx(be,{className:"w-3 h-3"}),"Add to Notes"]})})]})},Pt=({gaps:t,onClipGapToNotes:s})=>{const[i,a]=m.useState("All"),r=[...new Set(t.map(l=>l.category))],x=i==="All"?t:t.filter(l=>l.category===i);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:["All",...r].map(l=>{const h=l!=="All"?V[l]:null,d=l==="All"?t.length:t.filter(c=>c.category===l).length;return e.jsxs("button",{onClick:()=>a(l),className:`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest border transition-all duration-300 ${i===l?h?`${h.bg} ${h.text} ${h.border}`:"bg-white/10 text-white border-white/20":"bg-white/[0.02] text-slate-500 border-white/5 hover:text-white hover:border-white/10"}`,children:[l," ",e.jsx("span",{className:"ml-1 opacity-60",children:d})]},l)})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:x.map((l,h)=>e.jsx(_t,{gap:l,index:h,onClipToNotes:s},`${l.category}-${h}`))})]})},At=({papers:t=[],library:s=[],onClipToNotes:i})=>{const[a,r]=m.useState([]),[x,l]=m.useState(""),[h,d]=m.useState(!1),[c,g]=m.useState(null),[j,p]=m.useState(""),[N,y]=m.useState("search"),[v,u]=m.useState(""),$=(N==="search"?t:s).filter(o=>o.title.toLowerCase().includes(v.toLowerCase())||(o.authors[0]||"").toLowerCase().includes(v.toLowerCase())),f=o=>{r(n=>n.find(b=>b.id===o.id)?n.filter(b=>b.id!==o.id):[...n,o])},w=o=>!!a.find(n=>n.id===o.id),C=async()=>{if(a.length<2){p("Please select at least 2 papers for gap analysis.");return}p(""),d(!0),g(null);try{const o=await _.post("/research/gap-analysis",{papers:a,research_context:x.trim()||null});g(o.data)}catch(o){p(o?.response?.data?.detail||"Gap analysis failed. Please try again.")}finally{d(!1)}},A=async o=>{if(!i)return;const n=o.suggested_questions?.map((S,R)=>`${R+1}. ${S}`).join(`
`)||"",b=`## Research Gap: ${o.title}

**Category:** ${o.category}  |  **Priority:** ${o.urgency}

${o.description}

### Suggested Research Questions
${n}`;i({title:`Gap: ${o.title.slice(0,60)}`,content:b,tags:["gap-analysis",o.category.toLowerCase(),"research-gap"]})},M=async()=>{if(!c||!i)return;const o=c.gaps.map(b=>{const S=b.suggested_questions?.map((R,L)=>`  ${L+1}. ${R}`).join(`
`)||"";return`### ${b.title}
**${b.category}** · ${b.urgency} Priority

${b.description}

**Suggested Questions:**
${S}`}).join(`

---

`),n=`# Gap Analysis Report

**Summary:** ${c.summary}

**Papers Analyzed:** ${c.papers_analyzed}  |  **Gaps Found:** ${c.gaps.length}

---

${o}`;i({title:`Gap Analysis — ${new Date().toLocaleDateString()}`,content:n,tags:["gap-analysis","report"]})},T=c?c.gaps.reduce((o,n)=>(o[n.urgency]=(o[n.urgency]||0)+1,o),{}):{};return e.jsxs("div",{className:"space-y-10 animate-reveal",children:[e.jsx("header",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/20",children:e.jsx(K,{className:"w-6 h-6 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-black tracking-tight text-white",children:"Gap Analysis"}),e.jsx("p",{className:"text-slate-500 font-medium tracking-tight",children:"Discover what's missing from your research corpus."})]})]})}),e.jsxs("div",{className:"glass-card-heavy p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-white tracking-tight",children:"Build Your Corpus"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium mt-1",children:"Select papers to analyze — minimum 2, up to 20."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"px-4 py-2 rounded-xl bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-sm font-black",children:[a.length," Selected"]}),a.length>0&&e.jsx("button",{onClick:()=>r([]),className:"p-2 rounded-xl text-slate-500 hover:text-red-400 hover:bg-red-500/10 transition-all",title:"Clear selection",children:e.jsx(z,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex gap-2",children:["search","library"].map(o=>e.jsx("button",{onClick:()=>{y(o),u("")},className:`px-5 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${N===o?"bg-indigo-500/15 text-indigo-300 border border-indigo-500/20":"text-slate-500 hover:text-white hover:bg-white/5"}`,children:o==="search"?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-3 h-3"}),"Search Results (",t.length,")"]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-3 h-3"}),"My Library (",s.length,")"]})},o))}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",value:v,onChange:o=>u(o.target.value),placeholder:"Filter papers by title or author…",className:"w-full bg-white/5 border border-white/10 rounded-xl pl-11 pr-4 py-3 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500/40 focus:bg-white/[0.07] transition-all"})]}),$.length===0?e.jsx("div",{className:"py-12 text-center border border-dashed border-white/5 rounded-2xl",children:e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:t.length===0&&s.length===0?"Search for papers on the Home tab first, then come back here.":"No papers match your filter."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-80 overflow-y-auto custom-scrollbar pr-1",children:$.map(o=>{const n=w(o);return e.jsx("button",{onClick:()=>f(o),className:`text-left p-4 rounded-2xl border transition-all duration-300 group ${n?"bg-indigo-500/10 border-indigo-500/30 shadow-lg shadow-indigo-500/10":"bg-white/[0.02] border-white/5 hover:border-white/15 hover:bg-white/[0.04]"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 mt-0.5 transition-all ${n?"border-indigo-400 bg-indigo-500":"border-slate-600 group-hover:border-slate-400"}`,children:n&&e.jsx(D,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-xs font-bold leading-snug line-clamp-2 transition-colors ${n?"text-white":"text-slate-400 group-hover:text-white"}`,children:o.title}),e.jsxs("p",{className:"text-[10px] text-slate-600 mt-1 font-medium",children:[o.authors?.[0]||"Unknown"," · ",o.year]})]})]})},o.id)})}),a.length>0&&e.jsxs("div",{className:"pt-2 border-t border-white/5",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3",children:["Corpus (",a.length," papers)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(o=>e.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-xs font-bold max-w-[240px]",children:[e.jsxs("span",{className:"truncate",children:[o.title.slice(0,35),o.title.length>35?"…":""]}),e.jsx("button",{onClick:()=>f(o),className:"shrink-0 hover:text-red-400 transition-colors",children:e.jsx(z,{className:"w-3 h-3"})})]},o.id))})]})]}),e.jsxs("div",{className:"glass-card-heavy p-6 space-y-3",children:[e.jsxs("label",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:["Research Context ",e.jsx("span",{className:"text-slate-600 normal-case font-medium tracking-normal",children:"(optional — helps the AI personalize the gap analysis)"})]}),e.jsx("textarea",{value:x,onChange:o=>l(o.target.value),placeholder:"e.g. PhD thesis on AI ethics in rural Sub-Saharan Africa, focusing on healthcare applications…",rows:3,className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-indigo-500/40 focus:bg-white/[0.07] transition-all resize-none"})]}),j&&e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-2xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm font-medium animate-slide-up",children:[e.jsx(ee,{className:"w-5 h-5 shrink-0"}),j]}),e.jsx("button",{onClick:C,disabled:h||a.length<2,className:"w-full btn-primary py-5 text-base font-black flex items-center justify-center gap-3 disabled:opacity-40 disabled:cursor-not-allowed group",children:h?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5 animate-spin"}),"Analyzing Research Corpus…"]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-5 h-5 group-hover:rotate-12 transition-transform"}),"Run Gap Analysis on ",a.length," Paper",a.length!==1?"s":"",e.jsx(F,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),c&&e.jsxs("div",{className:"space-y-8 animate-reveal",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Papers Analyzed",value:c.papers_analyzed,icon:te,color:"text-indigo-400"},{label:"Gaps Identified",value:c.gaps.length,icon:K,color:"text-emerald-400"},{label:"High Priority",value:T.High||0,icon:ee,color:"text-red-400"},{label:"Analysis Time",value:`${c.processing_time.toFixed(1)}s`,icon:se,color:"text-amber-400"}].map(o=>e.jsxs("div",{className:"glass-card-heavy p-5 flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center",children:e.jsx(o.icon,{className:`w-5 h-5 ${o.color}`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-black text-white",children:o.value}),e.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-slate-500",children:o.label})]})]},o.label))}),e.jsxs("div",{className:"glass-card-heavy p-8 space-y-4 border border-indigo-500/10 bg-indigo-500/[0.02]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 bg-indigo-500/10 rounded-xl flex items-center justify-center",children:e.jsx(Qe,{className:"w-5 h-5 text-indigo-400"})}),e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-indigo-300",children:"Executive Summary"})]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs font-black uppercase tracking-widest hover:bg-indigo-500/20 transition-all",children:[e.jsx(We,{className:"w-3.5 h-3.5"}),"Save Full Report"]})]}),e.jsx("p",{className:"text-base text-slate-300 leading-relaxed font-medium",children:c.summary})]}),c.gaps.length>0&&e.jsx(Pt,{gaps:c.gaps,onClipGapToNotes:A})]})]})},Gt=Object.freeze(Object.defineProperty({__proto__:null,default:At},Symbol.toStringTag,{value:"Module"}));function Rt(t=0){return t>=500?"text-yellow-400 border-yellow-400/30 bg-yellow-400/5":t>=100?"text-emerald-400 border-emerald-400/30 bg-emerald-400/5":t>=10?"text-indigo-400 border-indigo-400/30 bg-indigo-400/5":"text-slate-400 border-slate-700 bg-white/5"}const q=X.forwardRef(({paper:t,role:s,isActive:i,onClick:a},r)=>{const x=Rt(t.citations),l=s==="seed";return e.jsxs("div",{ref:r,onClick:()=>a&&a(t),className:`
                relative group cursor-pointer select-none rounded-2xl border p-4 transition-all duration-300
                ${l?"bg-indigo-500/10 border-indigo-500/40 shadow-lg shadow-indigo-500/20 scale-105 ring-2 ring-indigo-500/20":i?"bg-white/10 border-indigo-400/50 shadow-md":"bg-white/[0.03] border-white/10 hover:border-indigo-400/30 hover:bg-white/[0.06]"}
            `,children:[l&&e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-0.5 rounded-full bg-indigo-500 text-white text-[9px] font-black uppercase tracking-widest shadow",children:"Seed Paper"}),e.jsx("p",{className:"text-xs font-bold text-white leading-snug line-clamp-3 mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 font-medium",children:[t.authors?.[0]||"Unknown",t.authors?.length>1?" et al.":""," · ",t.year||"n.d."]}),t.citations>0&&e.jsxs("span",{className:`text-[10px] font-black px-2 py-0.5 rounded-full border ${x}`,children:[t.citations.toLocaleString()," cites"]})]})]})});q.displayName="NodeCard";const Tt=({paperId:t,paperTitle:s,onClose:i,onSearch:a})=>{const[r,x]=m.useState(null),[l,h]=m.useState(!0),[d,c]=m.useState(null),[g,j]=m.useState(null),[p,N]=m.useState([]),y=m.useRef(null),v=m.useRef(null),u=m.useRef([]),k=m.useRef([]);m.useEffect(()=>{let f=!0;return h(!0),c(null),_.get(`/research/papers/${t}/citation-graph`).then(w=>{f&&x(w.data)}).catch(w=>{f&&c(w?.response?.data?.detail||w.message||"Failed to load graph")}).finally(()=>{f&&h(!1)}),()=>{f=!1}},[t]);const $=m.useCallback(()=>{if(!y.current||!v.current)return;const f=y.current.getBoundingClientRect(),w=v.current.getBoundingClientRect();w.left+w.width/2-f.left;const C=w.top+w.height/2-f.top,A=w.left-f.left,M=w.right-f.left,T=[];u.current.forEach(o=>{if(!o)return;const n=o.getBoundingClientRect(),b=n.right-f.left,S=n.top+n.height/2-f.top,R=A,L=C,I=(b+R)/2;T.push({d:`M ${b} ${S} C ${I} ${S} ${I} ${L} ${R} ${L}`,type:"ref"})}),k.current.forEach(o=>{if(!o)return;const n=o.getBoundingClientRect(),b=M,S=C,R=n.left-f.left,L=n.top+n.height/2-f.top,I=(b+R)/2;T.push({d:`M ${b} ${S} C ${I} ${S} ${I} ${L} ${R} ${L}`,type:"cite"})}),N(T)},[]);return m.useEffect(()=>{if(!r||l)return;const f=setTimeout($,80);return()=>clearTimeout(f)},[r,l,$]),m.useEffect(()=>(window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)),[$]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/80 backdrop-blur-md overflow-y-auto py-8 px-4",onClick:f=>{f.target===f.currentTarget&&i()},children:e.jsxs("div",{className:"relative w-full max-w-7xl bg-[#0d1117] border border-white/10 rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-8 py-5 border-b border-white/10 bg-white/[0.02]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 bg-indigo-500/10 rounded-xl flex items-center justify-center border border-indigo-500/20",children:e.jsx(et,{className:"w-4 h-4 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Live Citation Graph"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium truncate max-w-[500px]",children:s})]})]}),e.jsx("button",{onClick:i,className:"p-2.5 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-slate-400 hover:text-white transition-all",children:e.jsx(z,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-8 min-h-[60vh]",children:[l&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 gap-4",children:[e.jsx(E,{className:"w-10 h-10 text-indigo-400 animate-spin"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium animate-pulse",children:"Fetching citation connections from OpenAlex…"})]}),d&&!l&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 gap-4 text-center",children:[e.jsx(we,{className:"w-10 h-10 text-red-400"}),e.jsx("p",{className:"text-red-400 font-bold",children:"Failed to load citation graph"}),e.jsx("p",{className:"text-slate-500 text-xs max-w-xs",children:d})]}),r&&!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-8 pb-6 border-b border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-indigo-400"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-indigo-400",children:"References"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-xs font-black",children:[r.references?.length,"/",r.total_references_count]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-emerald-400",children:"Total Citations"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-300 text-xs font-black",children:(r.total_cited_by_count||0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-yellow-400",children:"Citing Papers Shown"}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-yellow-500/10 border border-yellow-500/20 text-yellow-300 text-xs font-black",children:r.cited_by?.length})]})]}),e.jsxs("div",{className:"flex items-center gap-6 mb-6 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-8 h-0.5 bg-indigo-500/60 inline-block"}),"Seed cites these (past)"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-8 h-0.5 bg-emerald-500/60 inline-block"}),"These cite seed (future)"]})]}),e.jsxs("div",{ref:y,className:"relative grid grid-cols-[1fr_280px_1fr] gap-6 items-center",children:[e.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{overflow:"visible",zIndex:0},children:p.map((f,w)=>e.jsx("path",{d:f.d,fill:"none",stroke:f.type==="ref"?"rgba(99,102,241,0.35)":"rgba(52,211,153,0.35)",strokeWidth:"1.5",strokeDasharray:f.type==="ref"?"4 3":"0"},w))}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400 mb-4 flex items-center gap-2",children:[e.jsx(le,{className:"w-3 h-3"})," Past · References"]}),r.references?.length===0&&e.jsx("p",{className:"text-xs text-slate-600 italic py-8 text-center border border-dashed border-white/5 rounded-2xl",children:"No references indexed in OpenAlex"}),r.references?.map((f,w)=>e.jsx(q,{ref:C=>u.current[w]=C,paper:f,role:"ref",isActive:g?.id===f.id,onClick:C=>j(A=>A?.id===C.id?null:C)},f.id))]}),e.jsx("div",{className:"flex flex-col items-center relative z-10",children:r.seed&&e.jsx(q,{ref:v,paper:r.seed,role:"seed",isActive:!1,onClick:()=>{}})}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[e.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest text-emerald-400 mb-4 flex items-center justify-end gap-2",children:["Future · Citing Papers ",e.jsx(F,{className:"w-3 h-3"})]}),r.cited_by?.length===0&&e.jsx("p",{className:"text-xs text-slate-600 italic py-8 text-center border border-dashed border-white/5 rounded-2xl",children:"No citing papers found yet"}),r.cited_by?.map((f,w)=>e.jsx(q,{ref:C=>k.current[w]=C,paper:f,role:"cite",isActive:g?.id===f.id,onClick:C=>j(A=>A?.id===C.id?null:C)},f.id))]})]}),g&&e.jsx("div",{className:"mt-8 p-6 rounded-2xl bg-white/[0.04] border border-white/10 animate-fade-in space-y-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-base font-black text-white leading-snug mb-2",children:g.title}),e.jsxs("p",{className:"text-xs text-slate-400",children:[g.authors?.join(", ")," · ",g.year," · ",g.citations?.toLocaleString()," citations"]}),g.abstract&&e.jsx("p",{className:"text-xs text-slate-500 mt-3 leading-relaxed line-clamp-4",children:g.abstract})]}),e.jsxs("div",{className:"flex flex-col gap-2 shrink-0",children:[a&&e.jsxs("button",{onClick:()=>{a(g.title),i()},className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 border border-indigo-500/20 hover:bg-indigo-500/20 text-xs font-black uppercase tracking-widest transition-all",children:[e.jsx(B,{className:"w-3.5 h-3.5"}),"Search This"]}),e.jsxs("a",{href:`https://openalex.org/${g.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white/5 text-slate-400 border border-white/10 hover:text-white text-xs font-black uppercase tracking-widest transition-all",children:[e.jsx(tt,{className:"w-3.5 h-3.5"}),"OpenAlex"]}),e.jsxs("button",{onClick:()=>j(null),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white/5 text-slate-400 border border-white/10 hover:text-white text-xs font-black uppercase tracking-widest transition-all",children:[e.jsx(z,{className:"w-3.5 h-3.5"}),"Close"]})]})]})})]})]})]})})},Bt=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"}));export{Ot as B,Ft as C,Mt as D,Gt as G,rt as P,It as R,Et as S,_ as a,zt as b,Ut as c,Bt as d};
