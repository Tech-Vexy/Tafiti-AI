const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/views-Do-ud7zp.js","assets/vendor-react-NFnRu0ps.js","assets/vendor-clerk-Drl8xhj8.js","assets/vendor-misc-CU5X6kO2.js","assets/NotesView-DEnxOhIC.js"])))=>i.map(i=>d[i]);
import{j as e,R as P,X as te,ae as kt,K as Me,o as St,F as ue,af as Be,d as Ye,ag as He,U as Ge,p as _t,ah as Ct,ai as Oe,k as Et,r as i,n as U,aj as Pt,i as Lt,e as Y,ab as Rt,ak as qe,al as Tt,am as At,Q as It,J as $t,ad as Ft,a4 as zt,an as Dt,ao as Ot,E as Ut,ap as Vt,a as Mt,aq as Bt,w as X,ar as Yt,f as de,as as Ht,at as Gt,z as ee,au as qt,W as Kt,m as Wt,O as Qt,I as Jt,a3 as Zt,q as Xt,av as es,aw as ts}from"./vendor-react-NFnRu0ps.js";import{a as v,P as ss}from"./views-Do-ud7zp.js";import"./vendor-clerk-Drl8xhj8.js";import"./vendor-misc-CU5X6kO2.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))g(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const x of o.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&g(x)}).observe(document,{childList:!0,subtree:!0});function h(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function g(n){if(n.ep)return;n.ep=!0;const o=h(n);fetch(n.href,o)}})();const as="modulepreload",rs=function(s){return"/"+s},Ue={},T=function(a,h,g){let n=Promise.resolve();if(h&&h.length>0){document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),d=x?.nonce||x?.getAttribute("nonce");n=Promise.allSettled(h.map(l=>{if(l=rs(l),l in Ue)return;Ue[l]=!0;const b=l.endsWith(".css"),p=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const f=document.createElement("link");if(f.rel=b?"stylesheet":as,b||(f.as="script"),f.crossOrigin="",f.href=l,d&&f.setAttribute("nonce",d),document.head.appendChild(f),b)return new Promise((N,k)=>{f.addEventListener("load",N),f.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(x){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=x,window.dispatchEvent(d),!d.defaultPrevented)throw x}return n.then(x=>{for(const d of x||[])d.status==="rejected"&&o(d.reason);return a().catch(o)})},Ke=({size:s="md",className:a=""})=>{const h={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},g={sm:"w-5 h-5",md:"w-7 h-7",lg:"w-10 h-10",xl:"w-16 h-16"};return e.jsxs("div",{className:`relative flex items-center justify-center group ${a}`,children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-tr from-indigo-500 to-emerald-400 rounded-2xl opacity-20 group-hover:opacity-40 transition-opacity blur-lg animate-pulse"}),e.jsxs("div",{className:`${h[s]} bg-[var(--bg-main)] border border-white/10 rounded-2xl flex items-center justify-center shadow-2xl relative overflow-hidden group-hover:rotate-6 transition-all duration-500 ease-in-out`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`${g[s]} relative z-10`,children:[e.jsx("path",{d:"M30 25H70M50 25V75",stroke:"url(#tafiti-gradient)",strokeWidth:"12",strokeLinecap:"round",className:"drop-shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),e.jsx("circle",{cx:"50",cy:"50",r:"35",stroke:"white",strokeWidth:"2",strokeDasharray:"4 4",className:"opacity-30 group-hover:animate-spin-slow origin-center"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tafiti-gradient",x1:"30",y1:"25",x2:"70",y2:"75",gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{stopColor:"#6366f1"}),e.jsx("stop",{offset:"1",stopColor:"#10b981"})]})})]})]})]})},is=({className:s=""})=>e.jsxs("div",{className:`flex items-center gap-4 ${s}`,children:[e.jsx(Ke,{size:"md"}),e.jsx("span",{className:"text-2xl font-black tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:"Tafiti AI"})]}),ns=({children:s,user:a,navItems:h,secondaryNav:g,unreadNotifications:n=0,notifications:o=[],onMarkRead:x})=>{const[d,l]=P.useState(!0),[b,p]=P.useState(!1);P.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),L=$=>{$.matches?document.documentElement.classList.remove("light"):document.documentElement.classList.add("light")};return L(c),c.addEventListener("change",L),()=>c.removeEventListener("change",L)},[]);const f=a?.subscription_status==="trialing",N=a?.subscription_status==="active";a?.subscription_status;const k=()=>{if(!a?.created_at||!a?.trial_ends_at)return{daysLeft:0,progress:0};const c=new Date(a.created_at),L=new Date(a.trial_ends_at),$=new Date,F=Math.max(0,Math.ceil((L-$)/(1e3*60*60*24))),Q=L-c,z=$-c,se=Q<=0?100:Math.min(100,Math.max(0,Math.round(z/Q*100)));return{daysLeft:F,progress:se}},{daysLeft:w,progress:S}=k(),_=h||[{icon:kt,label:"Dashboard",id:"dashboard"},{icon:Me,label:"Research",id:"feed"},{icon:St,label:"Library",id:"library"},{icon:ue,label:"Notes",id:"notes"},{icon:Be,label:"History",id:"history"}],m=g||[{icon:Ye,label:"Settings",onClick:()=>{}},{icon:He,label:"Support",onClick:()=>{}}];return e.jsxs("div",{className:"min-h-screen bg-[var(--bg-main)] text-[var(--text-main)] flex overflow-hidden selection:bg-indigo-500/30",children:[e.jsx("div",{className:"mesh-gradient opacity-60 pointer-events-none"}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 lg:hidden animate-fade-in",onClick:()=>l(!1)}),e.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-72 bg-[var(--bg-sidebar)]/80 backdrop-blur-3xl border-r border-white/5 transition-all duration-700 ease-in-out ${d?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,children:e.jsxs("div",{className:"h-full flex flex-col p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-12",children:[e.jsx(is,{}),e.jsx("button",{className:"lg:hidden text-[var(--text-muted)] hover:text-white transition-colors",onClick:()=>l(!1),children:e.jsx(te,{className:"w-6 h-6"})})]}),e.jsxs("nav",{className:"flex-1 space-y-2 overflow-y-auto custom-scrollbar pr-2 -mr-2",children:[e.jsx("div",{className:"px-4 mb-6",children:e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500",children:"Workspace"})}),_.map(c=>e.jsxs("button",{onClick:()=>c.onClick&&c.onClick(c.id),className:`w-full flex items-center justify-between px-5 py-4 rounded-2xl transition-all duration-500 group ${c.active?"bg-indigo-500/10 text-white border border-indigo-500/20 shadow-lg shadow-indigo-500/5":"text-slate-400 hover:text-white hover:bg-white/[0.03]"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c.icon,{className:`w-5 h-5 ${c.active?"text-indigo-400":"group-hover:scale-110 group-hover:text-indigo-300 transition-all"}`}),e.jsx("span",{className:"font-bold tracking-tight",children:c.label})]}),c.active&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.8)]"})]},c.label)),e.jsx("div",{className:"px-4 mt-12 mb-6",children:e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500",children:"System"})}),m.map(c=>e.jsxs("button",{onClick:()=>c.onClick&&c.onClick(c.id),className:"w-full flex items-center gap-4 px-5 py-4 rounded-2xl text-slate-400 hover:text-white hover:bg-white/[0.03] transition-all duration-500 group",children:[e.jsx(c.icon,{className:"w-5 h-5 group-hover:scale-110 group-hover:text-emerald-400 transition-all"}),e.jsx("span",{className:"font-bold tracking-tight",children:c.label})]},c.label))]}),e.jsx("div",{className:"pt-8 border-t border-white/5",children:e.jsxs("div",{className:"flex items-center justify-between px-2 cursor-pointer group/user hover:bg-white/[0.03] p-2 rounded-2xl transition-all duration-300",onClick:()=>m.find(c=>c.label==="Settings")?.onClick?.("profile"),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500/20 to-emerald-400/20 rounded-2xl flex items-center justify-center text-sm font-black shadow-xl overflow-hidden group-hover/user:scale-105 transition-transform border border-white/10",children:a?.imageUrl?e.jsx("img",{src:a.imageUrl,alt:a.username,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-500 text-white",children:a?.username?.charAt(0).toUpperCase()||e.jsx(Ge,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white uppercase tracking-tight group-hover/user:text-indigo-300 transition-colors line-clamp-1",children:a?.username||"Researcher"}),e.jsx("div",{className:"flex items-center gap-2",children:N?e.jsx("span",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-widest bg-emerald-400/10 px-1.5 py-0.5 rounded",children:"Pro Scholar"}):f?e.jsxs("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest bg-indigo-400/10 px-1.5 py-0.5 rounded",children:["Trial: ",w,"d"]}):e.jsx("span",{className:"text-[9px] font-black text-red-400 uppercase tracking-widest bg-red-400/10 px-1.5 py-0.5 rounded",children:"Expired"})})]})]}),e.jsx(_t,{className:"w-4 h-4 text-slate-600 group-hover/user:text-indigo-400 transition-all opacity-0 group-hover/user:opacity-100"})]})})]})}),e.jsxs("main",{className:"flex-1 min-h-screen relative overflow-y-auto custom-scrollbar",children:[e.jsxs("header",{className:"sticky top-0 z-40 bg-[var(--bg-main)]/80 backdrop-blur-xl border-b border-white/5 p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"lg:hidden p-2 glass-card rounded-xl",onClick:()=>l(!0),children:e.jsx(Ct,{className:"text-white w-6 h-6"})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx("h1",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.3em]",children:"Scholar Workspace"})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!b),className:`p-3 rounded-2xl transition-all duration-300 border ${b?"bg-indigo-500/10 border-indigo-500/20 text-indigo-400":"bg-white/5 border-white/5 text-slate-500 hover:text-white"}`,children:[e.jsx(Oe,{className:"w-5 h-5"}),n>0&&e.jsx("span",{className:"absolute top-2 right-2 w-4 h-4 bg-indigo-500 border-2 border-[var(--bg-main)] rounded-full text-[8px] font-black flex items-center justify-center text-white",children:n})]}),b&&e.jsxs("div",{className:"absolute right-0 mt-4 w-80 glass-card-heavy border-white/10 shadow-2xl z-50 p-2 overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-white",children:"Scholar Alerts"}),e.jsxs("span",{className:"text-[10px] bg-indigo-500/20 text-indigo-400 px-2 py-0.5 rounded-full font-bold",children:[n," New"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto custom-scrollbar",children:o.length>0?o.map(c=>e.jsx("div",{className:`p-4 hover:bg-white/5 transition-colors cursor-pointer group border-b border-white/5 last:border-0 ${c.is_read?"opacity-60":""}`,onClick:()=>{c.is_read||x(c.id),c.link&&(window.location.href=c.link)},children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-500/10 flex items-center justify-center shrink-0",children:e.jsx(Oe,{className:"w-4 h-4 text-indigo-400"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-white group-hover:text-indigo-300 transition-colors leading-tight",children:c.content}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-slate-500",children:new Date(c.created_at).toLocaleDateString()}),!c.is_read&&e.jsx(Et,{className:"w-3 h-3 text-indigo-500"})]})]})]})},c.id)):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"All quiet in the lab."})})})]})]}),e.jsxs("div",{className:"lg:hidden flex items-center gap-3",children:[e.jsx(Ke,{size:"sm"}),e.jsx("span",{className:"font-black text-xl tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400",children:"Tafiti"})]})]})]}),e.jsx("div",{className:"relative z-10 h-full",children:s})]})]})},W=new Date().getFullYear(),ls=[{label:"Any",value:0},{label:"â‰¥ 10",value:10},{label:"â‰¥ 50",value:50},{label:"â‰¥ 100",value:100},{label:"â‰¥ 500",value:500},{label:"â‰¥ 1 000",value:1e3}],We=i.forwardRef(({onSearch:s,isLoading:a},h)=>{const g=i.useRef(null),[n,o]=i.useState(""),[x,d]=i.useState(!1),[l,b]=i.useState(""),[p,f]=i.useState(""),[N,k]=i.useState(0);i.useImperativeHandle(h,()=>({focus:()=>{g.current?.focus(),g.current?.select()}}));const w=[l&&Number(l)>1900,p&&Number(p)<=W,N>0].filter(Boolean).length,S=()=>{const m={};return l&&Number(l)>1900&&(m.min_year=Number(l)),p&&Number(p)<=W&&(m.max_year=Number(p)),N>0&&(m.min_citations=N),Object.keys(m).length>0?m:null},V=()=>{b(""),f(""),k(0)},_=m=>{m.preventDefault(),n.trim()&&s(n,S())};return e.jsxs("form",{onSubmit:_,className:"w-full relative group animate-fade-in anim-delay-100",children:[e.jsxs("div",{className:`
                relative flex items-center p-2 glass-card-heavy rounded-2xl transition-all duration-500
                ${a?"ring-2 ring-indigo-500/20":"group-hover:border-indigo-500/30 group-focus-within:ring-2 group-focus-within:ring-indigo-500/20"}
                ${x?"rounded-b-none border-b-transparent":""}
            `,children:[e.jsx("div",{className:"pl-4 pr-3 text-[var(--text-muted)]",children:a?e.jsx(U,{className:"w-5 h-5 animate-spin text-indigo-400"}):e.jsx(Me,{className:"w-5 h-5 group-focus-within:text-indigo-400 transition-colors"})}),e.jsx("input",{ref:g,type:"text",value:n,onChange:m=>o(m.target.value),placeholder:"What are you researching today?  (âŒ˜K)",className:"flex-1 bg-transparent border-none outline-none text-lg py-3 pr-4 text-[var(--text-main)] placeholder:text-[var(--text-muted)]",disabled:a}),e.jsxs("div",{className:"flex items-center gap-2 pr-2",children:[e.jsxs("button",{type:"button",onClick:()=>d(m=>!m),className:`relative p-3 rounded-xl transition-all duration-300 border ${x||w>0?"text-indigo-400 bg-indigo-500/10 border-indigo-500/20":"text-[var(--text-muted)] hover:text-[var(--text-main)] hover:bg-white/5 border-transparent"}`,title:"Advanced filters",children:[e.jsx(Pt,{className:"w-5 h-5"}),w>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-indigo-500 rounded-full text-[9px] font-black text-white flex items-center justify-center",children:w})]}),e.jsx("button",{type:"submit",disabled:a||!n.trim(),className:`
                            px-6 py-3 rounded-xl font-bold transition-all duration-300
                            ${n.trim()?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/30 hover:scale-105 active:scale-95":"bg-white/5 text-[var(--text-muted)] cursor-not-allowed"}
                        `,children:"Search"})]})]}),x&&e.jsxs("div",{className:"glass-card-heavy rounded-t-none rounded-b-2xl border-t border-white/5 px-6 py-5 space-y-5 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Advanced Filters"}),w>0&&e.jsxs("button",{type:"button",onClick:V,className:"flex items-center gap-1.5 text-[10px] font-black uppercase tracking-widest text-red-400 hover:text-red-300 transition-colors",children:[e.jsx(te,{className:"w-3 h-3"})," Clear all"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"From Year"}),e.jsx("input",{type:"number",min:1900,max:W,value:l,onChange:m=>b(m.target.value),placeholder:"e.g. 2015",className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-sm text-white placeholder:text-slate-600 outline-none focus:border-indigo-500/40 focus:ring-1 focus:ring-indigo-500/20 transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"To Year"}),e.jsx("input",{type:"number",min:1900,max:W,value:p,onChange:m=>f(m.target.value),placeholder:`e.g. ${W}`,className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-sm text-white placeholder:text-slate-600 outline-none focus:border-indigo-500/40 focus:ring-1 focus:ring-indigo-500/20 transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Min Citations"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:N,onChange:m=>k(Number(m.target.value)),className:"w-full appearance-none bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-sm text-white outline-none focus:border-indigo-500/40 focus:ring-1 focus:ring-indigo-500/20 transition-all cursor-pointer pr-8",children:ls.map(m=>e.jsx("option",{value:m.value,className:"bg-[#0f1117]",children:m.label},m.value))}),e.jsx(Lt,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-500 pointer-events-none"})]})]})]}),w>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[l&&e.jsx(he,{label:`From ${l}`,onRemove:()=>b("")}),p&&e.jsx(he,{label:`Until ${p}`,onRemove:()=>f("")}),N>0&&e.jsx(he,{label:`â‰¥ ${N.toLocaleString()} citations`,onRemove:()=>k(0)})]})]}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500/0 via-indigo-500/0 to-emerald-500/0 rounded-2xl blur-lg transition-all duration-500 group-focus-within:from-indigo-500/20 group-focus-within:via-indigo-500/10 group-focus-within:to-emerald-500/20 -z-10"})]})});We.displayName="SearchBox";const he=({label:s,onRemove:a})=>e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 text-[10px] font-black uppercase tracking-widest",children:[s,e.jsx("button",{type:"button",onClick:a,className:"hover:text-white transition-colors",children:e.jsx(te,{className:"w-2.5 h-2.5"})})]}),xe=P.memo(function({paper:a,onSelect:h,isSelected:g,onSave:n,isSaved:o,onClip:x,onImpact:d,impact:l,isImpactLoading:b,onGraph:p}){const[f,N]=i.useState(o),[k,w]=i.useState(!1),S=_=>{_.stopPropagation(),N(!f),n&&n(a)},V=_=>{_.stopPropagation(),w(!k),!l&&!b&&d()};return e.jsxs("div",{onClick:()=>h(a),className:`
                glass-card p-8 cursor-pointer transition-all duration-700 group relative overflow-hidden backdrop-blur-3xl animate-reveal
                ${g?"ring-2 ring-indigo-500 bg-indigo-500/[0.04] translate-y-[-8px] shadow-2xl shadow-indigo-500/20":"hover:bg-white/[0.04]"}
            `,children:[e.jsx("div",{className:`absolute -top-10 -right-10 w-40 h-40 bg-indigo-500/10 blur-[80px] rounded-full transition-opacity duration-700 ${g?"opacity-100":"opacity-0 group-hover:opacity-100"}`}),e.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"px-4 py-1.5 bg-indigo-500/10 text-indigo-300 rounded-full text-[10px] font-black uppercase tracking-[0.2em] border border-indigo-500/20 backdrop-blur-md",children:a.source||"OpenAlex"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:V,className:`p-2.5 rounded-xl transition-all duration-300 border ${k?"text-indigo-400 bg-indigo-500/10 border-indigo-500/20":"text-slate-500 bg-white/5 border-white/5 hover:text-indigo-300 hover:border-indigo-500/20"}`,title:"AI Impact Explainer",children:b?e.jsx(U,{className:"w-4 h-4 animate-spin"}):e.jsx(Y,{className:`w-4 h-4 ${k?"fill-indigo-400":""}`})}),p&&e.jsx("button",{onClick:_=>{_.stopPropagation(),p(a)},className:"p-2.5 rounded-xl transition-all duration-300 border text-violet-400 bg-violet-500/5 border-violet-500/10 hover:bg-violet-500/15 hover:border-violet-500/30",title:"Live Citation Graph",children:e.jsx(Rt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:_=>{_.stopPropagation(),x&&x(a)},className:"p-2.5 rounded-xl transition-all duration-300 border text-indigo-400 bg-indigo-500/5 border-indigo-500/10 hover:bg-indigo-500/10 hover:border-indigo-500/30",title:"Send to Notes",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:`p-2.5 rounded-xl transition-all duration-300 border ${f?"text-emerald-400 bg-emerald-500/10 border-emerald-500/20":"text-slate-500 bg-white/5 border-white/5 hover:text-white hover:border-white/10"}`,children:e.jsx(qe,{className:`w-4 h-4 ${f?"fill-emerald-400":""}`})})]})]}),e.jsxs("div",{className:"space-y-5 relative z-10",children:[e.jsx("h3",{className:"text-xl font-black leading-snug tracking-tight text-white group-hover:text-indigo-300 transition-colors duration-500",children:a.title}),k&&l?e.jsxs("div",{className:"animate-slide-up bg-indigo-500/5 rounded-2xl p-4 border border-indigo-500/10 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-[9px] font-black uppercase tracking-widest text-indigo-400",children:["Personalized Impact for ",l.career_field]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Tt,{className:"w-3 h-3 text-amber-400 fill-amber-400"}),e.jsxs("span",{className:"text-[10px] font-black text-white",children:[l.relevance_score,"/10"]})]})]}),e.jsxs("p",{className:"text-xs text-slate-300 font-medium leading-relaxed italic border-l-2 border-indigo-500/30 pl-3",children:['"',l.impact_summary,'"']}),e.jsxs("div",{className:"space-y-1 pt-1",children:[e.jsx("span",{className:"text-[8px] font-black uppercase text-slate-500 tracking-tighter",children:"Key Takeaway"}),e.jsx("p",{className:"text-[11px] text-white font-bold leading-tight",children:l.key_takeaway})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-2 group/author cursor-help",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/5 flex items-center justify-center border border-white/5 group-hover/author:border-indigo-500/30 transition-colors",children:e.jsx(Ge,{className:"w-3 h-3 group-hover/author:text-indigo-400 transition-colors"})}),e.jsxs("span",{className:"group-hover/author:text-slate-300 transition-colors",children:[a.authors[0]||"Unknown"," et al."]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-3 h-3 text-indigo-500/50"}),e.jsx("span",{children:a.year})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-3 h-3 text-emerald-500/50"}),e.jsxs("span",{className:"text-emerald-500/70",children:[a.citations||0," Citations"]})]})]}),e.jsx("p",{className:"text-sm font-medium text-slate-400 line-clamp-3 leading-relaxed tracking-wide",children:a.abstract||"No abstract available for this publication."})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-white/5 flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:`flex items-center gap-2 transition-all duration-500 ${g?"translate-x-0 opacity-100":"-translate-x-4 opacity-0 group-hover:translate-x-0 group-hover:opacity-100"}`,children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-indigo-400",children:"Ready for Synthesis"}),e.jsx($t,{className:"w-3 h-3 text-indigo-400"})]}),e.jsx("button",{className:"p-2 text-slate-500 hover:text-indigo-400 transition-colors",onClick:_=>{_.stopPropagation()},children:e.jsx(Ft,{className:"w-4 h-4"})})]})]})});xe.displayName="PaperCard";const Qe=i.createContext(null),os=({children:s})=>{const[a,h]=i.useState([]),g=i.useRef(0),n=i.useCallback(d=>{h(l=>l.filter(b=>b.id!==d))},[]),o=i.useCallback((d,l="info",b=4e3)=>{const p=++g.current;return h(f=>[...f.slice(-4),{id:p,message:d,type:l}]),b>0&&setTimeout(()=>n(p),b),p},[n]),x={success:(d,l)=>o(d,"success",l),error:(d,l)=>o(d,"error",l??6e3),info:(d,l)=>o(d,"info",l),warn:(d,l)=>o(d,"warn",l),dismiss:n};return e.jsxs(Qe.Provider,{value:x,children:[s,e.jsx(hs,{toasts:a,onDismiss:n})]})},cs=()=>{const s=i.useContext(Qe);if(!s)throw new Error("useToast must be used inside <ToastProvider>");return s},Ve={success:{bar:"bg-emerald-500",icon:e.jsx(Ut,{className:"w-4 h-4 text-emerald-400 shrink-0 mt-0.5"}),border:"border-emerald-500/20",text:"text-emerald-100"},error:{bar:"bg-red-500",icon:e.jsx(Ot,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),border:"border-red-500/20",text:"text-red-100"},info:{bar:"bg-indigo-500",icon:e.jsx(Dt,{className:"w-4 h-4 text-indigo-400 shrink-0 mt-0.5"}),border:"border-indigo-500/20",text:"text-indigo-100"},warn:{bar:"bg-amber-500",icon:e.jsx(zt,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),border:"border-amber-500/20",text:"text-amber-100"}},ds=({toast:s,onDismiss:a})=>{const h=Ve[s.type]||Ve.info;return e.jsxs("div",{className:`
                relative flex items-start gap-3 min-w-[280px] max-w-sm
                bg-[#0d1117] border ${h.border} rounded-2xl px-4 py-3.5
                shadow-2xl shadow-black/60 backdrop-blur-xl
                animate-slide-up
            `,role:"alert",children:[e.jsx("div",{className:`absolute left-0 top-3 bottom-3 w-0.5 ${h.bar} rounded-full`}),h.icon,e.jsx("p",{className:`text-sm font-medium leading-snug flex-1 ${h.text}`,children:s.message}),e.jsx("button",{onClick:()=>a(s.id),className:"p-0.5 text-slate-600 hover:text-white transition-colors shrink-0 mt-0.5",children:e.jsx(te,{className:"w-3.5 h-3.5"})})]})},hs=({toasts:s,onDismiss:a})=>s.length===0?null:e.jsx("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col gap-3 items-end pointer-events-none",children:s.map(h=>e.jsx("div",{className:"pointer-events-auto",children:e.jsx(ds,{toast:h,onDismiss:a})},h.id))});function xs({onFocusSearch:s,onEscape:a,onSynthesize:h,onShowShortcuts:g}={}){i.useEffect(()=>{const n=o=>{const x=document.activeElement?.tagName?.toLowerCase(),d=x==="input"||x==="textarea"||x==="select"||document.activeElement?.isContentEditable,l=o.metaKey||o.ctrlKey;if(l&&o.key==="k"){o.preventDefault(),s?.();return}if(l&&o.key==="Enter"){o.preventDefault(),h?.();return}if(o.key==="Escape"&&!d){a?.();return}o.key==="?"&&!d&&g?.()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[s,a,h,g])}const us=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.S),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.SynthesisView}))),ms=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.b),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.ProfileView}))),ps=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.B),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.BillingView}))),gs=P.lazy(()=>T(()=>import("./NotesView-DEnxOhIC.js"),__vite__mapDeps([4,1,2,3,0]))),bs=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.D),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.DiscoverView}))),fs=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.R),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.ResearchChatView}))),ws=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.C),__vite__mapDeps([0,1,2,3])).then(s=>({default:s.CollaborationView}))),vs=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.G),__vite__mapDeps([0,1,2,3]))),js=P.lazy(()=>T(()=>import("./views-Do-ud7zp.js").then(s=>s.d),__vite__mapDeps([0,1,2,3]))),ys=()=>e.jsx("div",{className:"flex items-center justify-center py-32",children:e.jsx("div",{className:"w-8 h-8 border-2 border-indigo-500/30 border-t-indigo-400 rounded-full animate-spin"})}),Ns=[{label:"English",value:"English"},{label:"Kiswahili",value:"Kiswahili"},{label:"FranÃ§ais",value:"French"},{label:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",value:"Arabic"},{label:"EspaÃ±ol",value:"Spanish"},{label:"PortuguÃªs",value:"Portuguese"},{label:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",value:"Hindi"},{label:"Deutsch",value:"German"},{label:"ä¸­æ–‡",value:"Chinese (Simplified)"},{label:"Amharic",value:"Amharic"},{label:"Yoruba",value:"Yoruba"},{label:"Hausa",value:"Hausa"},{label:"Zulu",value:"Zulu"}],ks=()=>{const{getToken:s}=Vt(),{user:a}=Mt();i.useEffect(()=>{T(async()=>{const{injectToken:u}=await import("./views-Do-ud7zp.js").then(y=>y.c);return{injectToken:u}},__vite__mapDeps([0,1,2,3])).then(({injectToken:u})=>{u(s)});const r=new URLSearchParams(window.location.search).get("reference");r&&a&&ut(r),a&&Te()},[s,a]);const[h,g]=i.useState([]),[n,o]=i.useState([]),[x,d]=i.useState(""),[l,b]=i.useState(!1),[p,f]=i.useState(!1),[N,k]=i.useState(""),[w,S]=i.useState("feed"),[V,_]=i.useState([]),[m,c]=i.useState(!1),[L,$]=i.useState(!1),[F,Q]=i.useState([]),[z,se]=i.useState([]),[me,pe]=i.useState(!1),[Je,Ze]=i.useState([]),[Xe,ge]=i.useState(!1),[C,ae]=i.useState(null),[be,re]=i.useState([]),[et,fe]=i.useState(!1),[tt,we]=i.useState(!1),[ve,je]=i.useState([]),[st,at]=i.useState([]),[rt,it]=i.useState(0),[ye,nt]=i.useState({}),[lt,Ne]=i.useState({}),[ke,ot]=i.useState(!1),[ct,ie]=i.useState([]),[ne,dt]=i.useState("English"),[ht,xt]=i.useState("English"),[H,G]=i.useState(null),[A,Se]=i.useState(!1),le=async()=>{Se(!0);try{const{data:t}=await v.post("/auth/start-trial");ae(t),j.success("ðŸŽ‰ Your 7-day free trial has started! Enjoy full access to Tafiti AI.")}catch{j.error("Failed to start trial. Please try again.")}finally{Se(!1)}},j=cs(),_e=i.useRef(null);xs({onFocusSearch:i.useCallback(()=>{_e.current?.focus()},[]),onEscape:i.useCallback(()=>{H&&G(null)},[H]),onSynthesize:i.useCallback(()=>{n.length>0&&!p?$e():n.length===0&&j.warn("Select at least one paper before synthesizing. (âŒ˜â†µ)")},[n,p]),onShowShortcuts:i.useCallback(()=>{j.info("âŒ˜K Â· Focus search  |  âŒ˜â†µ Â· Synthesize  |  Esc Â· Close modal  |  ? Â· Help")},[])});const E=i.useMemo(()=>({...C,username:a?.fullName||a?.username||C?.username||a?.firstName||"Researcher",email:a?.primaryEmailAddress?.emailAddress||C?.email,imageUrl:a?.imageUrl,university:C?.university||"Independent Researcher",citation_count:C?.citation_count||0,publications_count:C?.publications_count||0,interest_score:C?.interest_score||0,expertise_areas:C?.expertise_areas||[],career_field:C?.career_field||"",subscription_status:C?.subscription_status||"trialing",trial_ends_at:C?.trial_ends_at,subscription_ends_at:C?.subscription_ends_at,notification_count:C?.notification_count||0}),[C,a]),I=!E.subscription_status||E.subscription_status==="inactive",Ce=E.subscription_status==="trialing"&&E.trial_ends_at&&new Date(E.trial_ends_at)<new Date,Ee=(I||Ce)&&!E.is_superuser,q=async()=>{if(a)try{const t=await v.get("/auth/me");ae(t.data)}catch(t){console.warn("Backend profile fetch failed, using Clerk data as fallback",t),C||ae({username:a.username||a.firstName,email:a.primaryEmailAddress?.emailAddress})}},ut=async t=>{try{const{data:r}=await v.get(`/billing/verify/${t}`);r.status==="success"&&(q(),window.history.replaceState({},document.title,window.location.pathname))}catch(r){console.error("Payment verification failed",r)}},oe=async(t,r=null)=>{b(!0),k(t),S("feed");try{const u=await v.post("/research/search",{query:t,filters:r});g(u.data.papers),o(u.data.papers),d(""),_([]),j.success(`Found ${u.data.papers.length} paper${u.data.papers.length!==1?"s":""} for "${t}"`)}catch{j.error("Search failed. Check your connection and try again.")}finally{b(!1)}},Pe=async t=>{try{await v.post("/queries/library/papers",t),Le(),j.success("Paper saved to library!")}catch{j.error("Failed to save paper. Please try again.")}},Le=async()=>{try{const t=await v.get("/queries/library/papers");Q(t.data)}catch(t){console.error("Failed to fetch library",t)}},Re=async t=>{c(!0);try{await v.put("/auth/me",{career_field:t.career_field,expertise_areas:t.interests}),q();const r=await v.post("/research/recommendations",t);_(r.data),$(!1)}catch(r){console.error("Failed to fetch recommendations:",r)}finally{c(!1)}},mt=async(t,r)=>{if(!t.trim())return;const u={role:"user",content:t};re(y=>[...y,u]),ie([]),fe(!0);try{const y=await fetch(`${v.defaults.baseURL}/research/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await s()}`},body:JSON.stringify({query:t,history:be,source_ids:r,uploaded_text:ve.map(O=>O.extracted_text).join(`

`)})});if(!y.ok)throw new Error("Chat failed");const R=y.body.getReader(),D=new TextDecoder;let J="";for(re(O=>[...O,{role:"assistant",content:""}]);;){const{value:O,done:ze}=await R.read();if(ze)break;const Z=D.decode(O).split(`
`);for(const K of Z)if(K.startsWith("data: ")){const M=K.slice(6);if(M==="[DONE]")break;try{const B=JSON.parse(M);B.content&&(J+=B.content,re(Nt=>{const ce=[...Nt];return ce[ce.length-1].content=J,ce})),B.followup&&ie(B.followup)}catch(B){console.error("Error parsing stream:",B)}}}}catch(y){console.error("Research chat failed:",y)}finally{fe(!1)}},pt=async t=>{const r=new FormData;r.append("file",t),we(!0);try{const u=await fetch(`${v.defaults.baseURL}/uploads/pdf`,{method:"POST",headers:{Authorization:`Bearer ${await s()}`},body:r});if(!u.ok)throw new Error("Upload failed");const y=await u.json();je(R=>[...R,{filename:y.filename,extracted_text:y.extracted_text,cid:y.cid}])}catch{j.error("Failed to upload PDF. Please ensure the backend is running.")}finally{we(!1)}},gt=t=>{je(r=>r.filter((u,y)=>y!==t))},Te=async()=>{ge(!0);try{const t=await v.get("/research/recommendations/researchers");Ze(t.data)}catch(t){console.error("Failed to fetch similar researchers:",t)}finally{ge(!1)}},bt=async t=>{try{await v.post(`/social/connect/${t}`),j.success("Connection request sent!"),q(),Te()}catch{j.error("Failed to send connection request.")}},ft=async t=>{if(!ye[t]){Ne(r=>({...r,[t]:!0}));try{const r=await v.post(`/research/papers/${t}/impact`);nt(u=>({...u,[t]:r.data}))}catch(r){console.error("Failed to get paper impact",r)}finally{Ne(r=>({...r,[t]:!1}))}}},Ae=async()=>{try{const t=await v.get("/social/notifications");at(t.data);const r=await v.get("/social/notifications/unread-count");it(r.data.count)}catch(t){console.error("Failed to fetch notifications",t)}},wt=async t=>{try{await v.put(`/social/notifications/${t}/read`),Ae(),q()}catch(r){console.error("Failed to mark read",r)}},Ie=t=>{o(r=>r.find(u=>u.id===t.id)?r.filter(u=>u.id!==t.id):[...r,t])},$e=async()=>{if(n.length!==0){f(!0),d(""),ie([]);try{const t=await s(),y=(await fetch(ke?"/api/v1/research/synthesize/collaborative":"/api/v1/research/synthesize/stream",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t} `},body:JSON.stringify({query:N,papers:n,output_language:ne,project_id:w==="collaboration"?selectedProject?.id:null})})).body.getReader(),R=new TextDecoder;let D="";for(;;){const{value:J,done:O}=await y.read();if(O)break;const De=R.decode(J).split(`
`);for(const Z of De)if(Z.startsWith("data: ")){const K=Z.slice(6);if(K==="[DONE]")break;try{const M=JSON.parse(K);M.content&&(D+=M.content,d(D))}catch{}}}xt(ne),j.success("Synthesis complete! Scroll down to read."),await v.post("/queries/",{title:`Synthesis: ${N}`,query:N,papers:n,answer:D,tags:["synthesis"]}),Fe()}catch{j.error("Synthesis failed. Please try again.")}finally{f(!1)}}};i.useEffect(()=>{a&&(Le(),Fe(),q(),Ae())},[a]);const Fe=async()=>{try{pe(!0);const t=await v.get("/queries/");se(t.data)}catch(t){console.error("Failed to fetch history",t)}finally{pe(!1)}},vt=async t=>{const r=`### ${t.title}

**Abstract:** ${t.abstract}

**Citation:** ${t.authors[0]} et al. (${t.year}). ${t.title}.`;try{await v.post("/notes/",{title:`Clip: ${t.title.slice(0,50)}...`,content:r,tags:["clip","paper"]}),j.success("Paper clipped to Notes!"),S("notes")}catch{j.error("Failed to clip paper to notes.")}},jt=async(t,r)=>{const u=r.map((R,D)=>`[${D+1}] ${R.authors[0]} et al. (${R.year}). ${R.title}.`).join(`
`),y=`## Research Synthesis

${t}

### Sources
${u}`;try{await v.post("/notes/",{title:`Clip: Synthesis - ${N.slice(0,30)}...`,content:y,tags:["clip","synthesis"]}),j.success("Synthesis clipped to Notes!"),S("notes")}catch{j.error("Failed to clip synthesis.")}},yt=async({title:t,content:r,tags:u})=>{try{await v.post("/notes/",{title:t,content:r,tags:u}),j.success("Gap note saved to Notes!"),S("notes")}catch{j.error("Failed to save gap note.")}};return e.jsxs(e.Fragment,{children:[e.jsx(Bt,{children:e.jsxs("div",{className:"min-h-screen w-full bg-[var(--bg-main)] flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-600/10 blur-[120px] rounded-full"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-emerald-600/10 blur-[120px] rounded-full"}),e.jsx("div",{className:"w-full max-w-md animate-fade-in relative z-10 text-center",children:e.jsxs("div",{className:"glass-card-heavy p-10 border-white/10 shadow-2xl",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-emerald-400 rounded-3xl flex items-center justify-center shadow-2xl mb-8 mx-auto transform rotate-6 scale-110",children:e.jsx(X,{className:"text-white w-10 h-10"})}),e.jsx("h1",{className:"text-4xl font-black tracking-tight text-white mb-4",children:"Tafiti AI"}),e.jsx("p",{className:"text-[var(--text-dim)] mb-10 text-lg",children:"Your professional academic network powered by AI."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Yt,{mode:"modal",children:e.jsxs("button",{className:"w-full btn-primary h-14 text-lg font-bold flex items-center justify-center gap-2 group",children:["Sign In",e.jsx(de,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),e.jsx(Ht,{mode:"modal",children:e.jsx("button",{className:"w-full py-4 rounded-xl bg-white/5 border border-white/10 text-white font-bold hover:bg-white/10 transition-all",children:"Create Account"})})]})]})})]})}),e.jsxs(Gt,{children:[e.jsx(ns,{user:E,unreadNotifications:rt,notifications:st,onMarkRead:wt,navItems:[{icon:X,label:"Home",id:"feed"},{icon:Qt,label:"Research Chat",id:"chat"},{icon:Jt,label:"Discover",id:"discover"},{icon:qe,label:"My Library",id:"library"},{icon:Zt,label:"Gap Analysis",id:"gap-analysis"},{icon:Xt,label:"Collaboration",id:"collaboration"},{icon:ue,label:"Research Notes",id:"notes"},{icon:ee,label:"Billing & Plans",id:"billing"}].map(t=>({...t,active:w===t.id,onClick:S})),secondaryNav:[{icon:Ye,label:"Settings",id:"profile",onClick:S},{icon:He,label:"Support",onClick:()=>window.open("https://github.com/Tafiti-AI","_blank")}],children:e.jsxs("div",{className:"max-w-7xl mx-auto pt-12 pb-32 px-8 animate-reveal",children:[I&&!E.is_superuser&&e.jsxs("div",{className:"mb-8 rounded-3xl bg-gradient-to-r from-indigo-600/20 via-indigo-500/10 to-emerald-600/20 border border-indigo-500/30 p-6 flex flex-col md:flex-row items-center justify-between gap-4 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-2xl flex items-center justify-center shrink-0",children:e.jsx(X,{className:"w-6 h-6 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-black text-lg tracking-tight",children:"Welcome to Tafiti AI! ðŸŽ‰"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Start your free 7-day trial to unlock AI synthesis, gap analysis, and more."})]})]}),e.jsxs("button",{onClick:le,disabled:A,className:"shrink-0 btn-primary px-8 py-3 text-sm font-black flex items-center gap-2 disabled:opacity-60",children:[A?e.jsx(U,{className:"w-4 h-4 animate-spin"}):e.jsx(Y,{className:"w-4 h-4"}),A?"Startingâ€¦":"Start Free Trial"]})]}),Ce&&!E.is_superuser&&e.jsxs("div",{className:"mb-8 rounded-3xl bg-gradient-to-r from-amber-600/15 via-orange-500/10 to-red-600/15 border border-amber-500/30 p-6 flex flex-col md:flex-row items-center justify-between gap-4 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-500/20 rounded-2xl flex items-center justify-center shrink-0",children:e.jsx(ee,{className:"w-6 h-6 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-black text-lg tracking-tight",children:"Your trial has ended"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Subscribe for 200 KES/month to continue using synthesis & gap analysis."})]})]}),e.jsxs("button",{onClick:()=>S("billing"),className:"shrink-0 bg-amber-500 hover:bg-amber-400 text-black font-black px-8 py-3 rounded-2xl text-sm flex items-center gap-2 transition-all",children:[e.jsx(de,{className:"w-4 h-4"})," Upgrade Now"]})]}),e.jsx("main",{className:"space-y-12",children:e.jsx(i.Suspense,{fallback:e.jsx(ys,{}),children:w==="profile"?e.jsx(ms,{user:E,careerField:E.career_field||"AI Research"}):w==="billing"?e.jsx(ps,{user:E}):w==="discover"?e.jsx(bs,{user:E,careerField:E.career_field||"AI Research",onSearch:oe,recs:V,isFetchRecs:m,similarResearchers:Je,isLoadingSimilar:Xe,onFetchRecommendations:Re,onConnect:bt}):w==="collaboration"?e.jsx(ws,{user:E}):w==="chat"?e.jsx(fs,{isLoading:et,messages:be,savedPapers:F,onSendMessage:mt,onUploadFile:pt,isUploading:tt,uploadedFiles:ve,onRemoveUpload:gt,isCollaborative:ke,setIsCollaborative:ot,followupQuestions:ct}):w==="notes"?e.jsx(gs,{}):w==="gap-analysis"?Ee?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 space-y-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-500/10 rounded-3xl flex items-center justify-center",children:e.jsx(ee,{className:"w-10 h-10 text-amber-400"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-3xl font-black text-white tracking-tight",children:I?"Start Your Free Trial":"Trial Expired"}),e.jsx("p",{className:"text-slate-400 font-medium max-w-md",children:I?"Gap Analysis is a premium feature. Start your free 7-day trial to access it.":"Your free trial has ended. Subscribe for 200 KES/month to continue using Gap Analysis."})]}),e.jsxs("button",{onClick:I?le:()=>S("billing"),disabled:A,className:"btn-primary px-10 py-4 text-base font-black flex items-center gap-3 disabled:opacity-60",children:[A?e.jsx(U,{className:"w-5 h-5 animate-spin"}):e.jsx(Y,{className:"w-5 h-5"}),I?A?"Startingâ€¦":"Start Free Trial":"Upgrade Now"]})]}):e.jsx(vs,{papers:h,library:F,onClipToNotes:yt}):w==="history"?e.jsxs("div",{className:"space-y-12 animate-reveal",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-4xl font-black tracking-tight text-white mb-2",children:"Research History"}),e.jsx("p",{className:"text-slate-500 font-medium tracking-tight",children:"Access your past syntheses and organized research data."})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:me?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(U,{className:"w-10 h-10 text-indigo-400 animate-spin"})}):z.length>0?z.map(t=>e.jsxs("div",{className:"glass-card-heavy p-8 space-y-4 hover:border-indigo-500/30 transition-all cursor-pointer group",onClick:()=>{d(t.answer),k(t.query),g(t.papers),S("feed")},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-indigo-400"})}),e.jsx("h3",{className:"font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight",children:t.title})]}),e.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-slate-500 line-clamp-2 text-sm leading-relaxed",children:t.answer}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] font-black uppercase tracking-widest text-slate-500 pt-4 border-t border-white/5",children:[e.jsxs("span",{children:[t.papers.length," Sources"]}),e.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(r=>e.jsx("div",{className:"w-6 h-6 rounded-full border border-[var(--bg-main)] bg-indigo-500/20"},r))})]})]},t.id)):e.jsx("div",{className:"text-center py-20 border-2 border-dashed border-white/5 rounded-3xl",children:e.jsx("p",{className:"text-slate-500 font-medium text-lg",children:"Your research history is empty."})})})]}):e.jsxs("div",{className:"space-y-12 animate-reveal",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-black tracking-tight text-white mb-2",children:w==="feed"?"Home":"Personal Library"}),e.jsx("p",{className:"text-slate-500 font-medium",children:w==="feed"?"Explore the latest academic breakthroughs.":"Manage your curated research repository."})]}),e.jsx("button",{onClick:()=>$(!L),className:`p-4 rounded-2xl border transition-all duration-500 ${L?"bg-indigo-500/20 border-indigo-500/30 text-indigo-300":"bg-white/5 border-white/5 text-slate-500 hover:text-white hover:border-white/10"}`,children:e.jsx(qt,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"relative z-10 glass-card-heavy p-2 border-indigo-500/10",children:e.jsx(We,{ref:_e,onSearch:oe,isLoading:l})}),L&&e.jsx("div",{className:"animate-slide-up bg-indigo-500/5 rounded-3xl p-1 border border-indigo-500/20",children:e.jsx(ss,{onSave:Re,isLoading:m})}),w==="feed"?e.jsxs("div",{className:"space-y-12",children:[h.length>0?e.jsxs("div",{className:"space-y-10 animate-reveal",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center text-indigo-400 transition-transform hover:scale-110",children:e.jsx(Kt,{className:"w-5 h-5"})}),e.jsxs("h3",{className:"text-lg font-black tracking-tight",children:['Results for "',N,'"']})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-2.5 rounded-xl bg-white/5 border border-white/10 hover:border-indigo-500/30 transition-all group",children:[e.jsx(Wt,{className:"w-3.5 h-3.5 text-indigo-400 shrink-0"}),e.jsx("select",{value:ne,onChange:t=>dt(t.target.value),className:"bg-transparent text-xs font-black text-white uppercase tracking-widest appearance-none outline-none cursor-pointer pr-1",title:"Output language for synthesis",children:Ns.map(t=>e.jsx("option",{value:t.value,className:"bg-[#0f1117] text-white normal-case font-normal",children:t.label},t.value))})]}),Ee?e.jsxs("button",{onClick:()=>I?le():S("billing"),disabled:A,className:"py-3 px-6 text-sm flex items-center gap-3 rounded-2xl bg-amber-500/10 border border-amber-500/30 text-amber-400 font-black hover:bg-amber-500/20 transition-all disabled:opacity-60",children:[A?e.jsx(U,{className:"w-4 h-4 animate-spin"}):e.jsx(ee,{className:"w-4 h-4"}),I?"Start Trial to Synthesize":"Upgrade to Synthesize"]}):e.jsxs("button",{onClick:$e,disabled:p||n.length===0,className:"btn-primary py-3 px-6 text-sm flex items-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Y,{className:`w-4 h-4 ${p?"animate-spin":""}`}),p?"Synthesizing...":`Synthesize ${n.length} Papers`]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(t=>e.jsx(xe,{paper:t,onSelect:Ie,isSelected:!!n.find(r=>r.id===t.id),onSave:Pe,isSaved:!!F.find(r=>r.id===t.id),onClip:vt,onImpact:()=>ft(t.id),impact:ye[t.id],isImpactLoading:lt[t.id],onGraph:r=>G(r)},t.id))}),e.jsx("div",{className:"pt-12",children:e.jsx(us,{synthesis:x,papers:n,isLoading:p,onClip:jt,language:ht})})]}):e.jsxs("div",{className:"glass-card p-24 text-center space-y-6 border-dashed border-white/5 bg-white/[0.01] hover:bg-white/[0.02] transition-colors group cursor-default",children:[e.jsx("div",{className:"w-24 h-24 bg-white/5 rounded-[2.5rem] mx-auto flex items-center justify-center group-hover:rotate-12 transition-transform duration-700",children:e.jsx(X,{className:"text-white/20 w-12 h-12"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-2xl font-black text-white/40 tracking-tight",children:"Your feed is ready."}),e.jsx("p",{className:"text-sm text-slate-500 max-w-xs mx-auto font-medium leading-relaxed",children:"Search for a topic or check out the trending research in your field."})]})]}),e.jsxs("div",{className:"pt-12 border-t border-white/5 space-y-8 animate-reveal",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/10 rounded-xl flex items-center justify-center text-indigo-400",children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black tracking-tight text-white",children:"Recent Research"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium tracking-tight",children:"Access your past academic syntheses."})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:me?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(U,{className:"w-8 h-8 text-indigo-400 animate-spin"})}):z.length>0?z.slice(0,5).map(t=>e.jsxs("div",{className:"glass-card-heavy p-8 space-y-4 hover:border-indigo-500/30 transition-all cursor-pointer group",onClick:()=>{d(t.answer),k(t.query),g(t.papers),window.scrollTo({top:0,behavior:"smooth"})},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-indigo-400"})}),e.jsx("h3",{className:"font-black text-xl text-white group-hover:text-indigo-400 transition-colors uppercase tracking-tight",children:t.title})]}),e.jsx("span",{className:"text-[10px] text-slate-500 font-black uppercase tracking-widest",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-slate-500 line-clamp-2 text-sm leading-relaxed",children:t.answer}),e.jsxs("div",{className:"flex items-center gap-4 text-[10px] font-black uppercase tracking-widest text-slate-500 pt-4 border-t border-white/5",children:[e.jsxs("span",{children:[t.papers.length," Sources"]}),e.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(r=>e.jsx("div",{className:"w-6 h-6 rounded-full border border-[var(--bg-main)] bg-indigo-500/20"},r))})]})]},t.id)):e.jsx("div",{className:"text-center py-12 border border-dashed border-white/5 rounded-3xl",children:e.jsx("p",{className:"text-slate-500 font-medium",children:"No recent history found."})})}),z.length>5&&e.jsxs("button",{onClick:()=>S("history"),className:"w-full py-4 rounded-2xl bg-white/5 border border-white/5 text-slate-500 font-black uppercase tracking-widest hover:bg-white/10 hover:text-white transition-all text-xs flex items-center justify-center gap-2 group",children:["View Full History",e.jsx(de,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]}):e.jsx("div",{className:"space-y-10 animate-reveal",children:F.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(t=>e.jsx(xe,{paper:t,onSelect:Ie,isSelected:!!n.find(r=>r.id===t.id),onSave:Pe,isSaved:!0,onGraph:r=>G(r)},t.id))}):e.jsxs("div",{className:"glass-card p-24 text-center space-y-6 border-dashed border-white/5 bg-white/[0.01]",children:[e.jsx("h3",{className:"text-2xl font-black text-white/40 tracking-tight",children:"Your library is empty."}),e.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed",children:"Save papers to build your personal academic repository."})]})})]})})})]})}),H&&e.jsx(js,{paperId:H.id,paperTitle:H.title,onClose:()=>G(null),onSearch:t=>{G(null),oe(t)}})]})]})},Ss="pk_test_cHJvZm91bmQtc2hyaW1wLTY1LmNsZXJrLmFjY291bnRzLmRldiQ";es.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(ts,{publishableKey:Ss,children:e.jsx(os,{children:e.jsx(ks,{})})})}));
